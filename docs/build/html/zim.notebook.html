
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>zim.notebook package &#8212; Zim Desktop Wiki 0.74 develop documentation</title>
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
    <script src="static/jquery.js"></script>
    <script src="static/underscore.js"></script>
    <script src="static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="zim-notebook-package">
<h1>zim.notebook package<a class="headerlink" href="#zim-notebook-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="zim.notebook.index.html">zim.notebook.index package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.base">zim.notebook.index.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.files">zim.notebook.index.files module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.links">zim.notebook.index.links module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.pages">zim.notebook.index.pages module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.tags">zim.notebook.index.tags module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-zim.notebook.info">
<span id="zim-notebook-info-module"></span><h2>zim.notebook.info module<a class="headerlink" href="#module-zim.notebook.info" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="zim.notebook.info.NotebookInfo">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">NotebookInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uri</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mtime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">interwiki</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">a</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class keeps the info for a notebook</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="zim.html#zim.fs.UnixPath.uri" title="zim.fs.UnixPath.uri"><strong>uri</strong></a> – The location of the notebook</p></li>
<li><p><a class="reference internal" href="zim.html#zim.fs.UnixPath.user_path" title="zim.fs.UnixPath.user_path"><strong>user_path</strong></a> – The location of the notebook relative to the
home folder (starts with ‘~/’) or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><a class="reference internal" href="zim.html#zim.applications.Application.name" title="zim.applications.Application.name"><strong>name</strong></a> – The notebook name (or the basename of the uri)</p></li>
<li><p><a class="reference internal" href="zim.html#zim.www.WWWLinker.icon" title="zim.www.WWWLinker.icon"><strong>icon</strong></a> – The file uri for the notebook icon</p></li>
<li><p><strong>icon_path</strong> – The location of the icon as configured (either
relative to the notebook location, relative to home folder or
absolute path)</p></li>
<li><p><a class="reference internal" href="zim.html#zim.fs.UnixPath.mtime" title="zim.fs.UnixPath.mtime"><strong>mtime</strong></a> – The mtime of the config file this info was read from (if any)</p></li>
<li><p><strong>active</strong> – The attribute is used to signal whether the notebook
is already open or not, used in the daemon context, <code class="docutils literal notranslate"><span class="pre">None</span></code> if this
is not used, <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p></li>
<li><p><strong>interwiki</strong> – The interwiki keyword (if any)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="zim.notebook.info.NotebookInfo.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfo.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if info is still up to date and update this object</p>
<p>This method will check the X{notebook.zim} file for notebook
folders and read it if it changed. It uses the <code class="docutils literal notranslate"><span class="pre">mtime</span></code>
attribute to keep track of changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when data was updated, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.info.NotebookInfoList">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">NotebookInfoList</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<p>This class keeps a list of <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> objects</p>
<p>It maps to a X{notebooks.list} config file that keeps a list of
notebook locations and cached attributes from the various
X{notebook.zim} config files</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><a class="reference internal" href="zim.config.html#zim.config.dicts.Boolean.default" title="zim.config.dicts.Boolean.default"><strong>default</strong></a> – <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> object for the default</p>
</dd>
</dl>
<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.get_by_name">
<code class="sig-name descname">get_by_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.get_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> object for a notebook by name</p>
<p>Names are checked case sensitive first, then case-insensitive</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – notebook name as string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.get_interwiki">
<code class="sig-name descname">get_interwiki</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.get_interwiki" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> object for a notebook by interwiki key</p>
<p>First checks the interwiki key for all notebooks (case insensitive)
than falls back to <a class="reference internal" href="#zim.notebook.info.NotebookInfoList.get_by_name" title="zim.notebook.info.NotebookInfoList.get_by_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">get_by_name()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – notebook name or interwiki key as string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the config and cache and populates the list</p>
<p>Format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">NotebookList</span><span class="p">]</span>
<span class="n">Default</span><span class="o">=</span><span class="n">uri1</span>
<span class="mi">1</span><span class="o">=</span><span class="n">uri1</span>
<span class="mi">2</span><span class="o">=</span><span class="n">uri2</span>

<span class="p">[</span><span class="n">Notebook</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">name</span><span class="o">=</span><span class="n">Foo</span>
<span class="n">uri</span><span class="o">=</span><span class="n">uri1</span>
</pre></div>
</div>
<p>Then followed by more “[Notebook]” sections that are cache data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – a string or a list of lines</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.parse_old_format">
<code class="sig-name descname">parse_old_format</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.parse_old_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses the config and cache and populates the list</p>
<p>Method for backward compatibility with list format with no
section headers and a whitespace separator between notebook
name and uri.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – a string or a list of lines</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the config and cache and populate the list</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.set_default">
<code class="sig-name descname">set_default</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uri</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.set_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the default notebook</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uri</strong> – the file uri or file path for the default notebook</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> objects and write cache</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.NotebookInfoList.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.NotebookInfoList.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the config and cache</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.info.VirtualFile">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">VirtualFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lines</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.VirtualFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="zim.notebook.info.VirtualFile.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">a</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.VirtualFile.connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.VirtualFile.disconnect">
<code class="sig-name descname">disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.VirtualFile.disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.info.VirtualFile.readlines">
<code class="sig-name descname">readlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.VirtualFile.readlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.notebook.info.get_notebook_info">
<code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">get_notebook_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.get_notebook_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the notebook info for either a uri,
or a File or a Dir object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – path as string, <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> object, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no notebook config
was found</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.info.get_notebook_list">
<code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">get_notebook_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.get_notebook_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of known notebooks as a <a class="reference internal" href="#zim.notebook.info.NotebookInfoList" title="zim.notebook.info.NotebookInfoList"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfoList</span></code></a></p>
<p>This will load the list from the default X{notebooks.list} file</p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.info.interwiki_link">
<code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">interwiki_link</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">link</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.interwiki_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an interwiki link into an url</p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.info.resolve_notebook">
<code class="sig-prename descclassname">zim.notebook.info.</code><code class="sig-name descname">resolve_notebook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">pwd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.info.resolve_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes either a notebook name or a file or dir path. For a name
it resolves the path by looking for a notebook of that name in the
notebook list.
Note that the <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> for an file path is not using any
actual info from the notebook, it just passes on the uri. Use
<code class="xref py py-class docutils literal notranslate"><span class="pre">build_notebook()</span></code> to split the URI in a notebook location and
an optional page path.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#zim.notebook.info.NotebookInfo" title="zim.notebook.info.NotebookInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></a> or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.notebook.layout">
<span id="zim-notebook-layout-module"></span><h2>zim.notebook.layout module<a class="headerlink" href="#module-zim.notebook.layout" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="zim.notebook.layout.FilesAttachmentFolder">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.layout.</code><code class="sig-name descname">FilesAttachmentFolder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder</span></em>, <em class="sig-param"><span class="n">is_source_file_func</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesAttachmentFolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="zim.notebook.layout.FilesAttachmentFolder.list_files">
<code class="sig-name descname">list_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesAttachmentFolder.list_files" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesAttachmentFolder.list_folders">
<code class="sig-name descname">list_folders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesAttachmentFolder.list_folders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesAttachmentFolder.list_names">
<code class="sig-name descname">list_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesAttachmentFolder.list_names" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.layout.FilesLayout">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.layout.</code><code class="sig-name descname">FilesLayout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder</span></em>, <em class="sig-param"><span class="n">endofline</span><span class="o">=</span><span class="default_value">'unix'</span></em>, <em class="sig-param"><span class="n">default_format</span><span class="o">=</span><span class="default_value">'wiki'</span></em>, <em class="sig-param"><span class="n">default_extension</span><span class="o">=</span><span class="default_value">'.txt'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.notebook.layout.NotebookLayout" title="zim.notebook.layout.NotebookLayout"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.layout.NotebookLayout</span></code></a></p>
<p>Layout is responsible for mapping between pages and files.
This is the most basic version, where each page maps to the
like-named file.</p>
<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.get_attachments_folder">
<code class="sig-name descname">get_attachments_folder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pagename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.get_attachments_folder" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.get_format">
<code class="sig-name descname">get_format</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.get_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.index_list_children">
<code class="sig-name descname">index_list_children</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pagename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.index_list_children" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.is_source_file">
<code class="sig-name descname">is_source_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.is_source_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.map_file">
<code class="sig-name descname">map_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.map_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a filepath to a pagename</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> and a file type (<code class="docutils literal notranslate"><span class="pre">FILE_TYPE_PAGE_SOURCE</span></code>,
F{FILE_TYPE_ATTACHMENT})</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.map_filepath">
<code class="sig-name descname">map_filepath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.map_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#zim.notebook.layout.FilesLayout.map_file" title="zim.notebook.layout.FilesLayout.map_file"><code class="xref py py-class docutils literal notranslate"><span class="pre">map_file</span></code></a> but takes a string with relative path</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.map_page">
<code class="sig-name descname">map_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pagename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.map_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Map a pagename to a (default) file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pagename</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a 2-tuple of a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> for the source and a <code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code>
for the attachments. Neither of these needs to exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.layout.FilesLayout.resolve_conflict">
<code class="sig-name descname">resolve_conflict</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">filepaths</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.FilesLayout.resolve_conflict" title="Permalink to this definition">¶</a></dt>
<dd><p>Decide which is the real page file when multiple files
map to the same page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepaths</strong> – 2 or more <code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code> objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code> that should take precedent as te page
source</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.layout.NotebookLayout">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.layout.</code><code class="sig-name descname">NotebookLayout</code><a class="headerlink" href="#zim.notebook.layout.NotebookLayout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.layout.decode_filename">
<code class="sig-prename descclassname">zim.notebook.layout.</code><code class="sig-name descname">decode_filename</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.decode_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Decodes a filename to a pagename</p>
<p>Reverse operation of <a class="reference internal" href="#zim.notebook.layout.encode_filename" title="zim.notebook.layout.encode_filename"><code class="xref py py-class docutils literal notranslate"><span class="pre">encode_filename()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – the filename as string or unicode object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the pagename as unicode object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.layout.encode_filename">
<code class="sig-prename descclassname">zim.notebook.layout.</code><code class="sig-name descname">encode_filename</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pagename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.layout.encode_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode a pagename to a filename</p>
<p>Since the filesystem may use another encoding than UTF-8 it may
not be able to use all valid page names directly as file names.
Therefore characters that are not allowed for the filesystem are
replaced with url encoding. The result is still unicode, which can
be used to construct a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object. (The File object
implementation takes care of actually encoding the string when
needed.)</p>
<p>Namespaces are mapped to directories by replacing “:” with “/”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pagename</strong> – the pagename as string or unicode object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the filename as unicode object but with characters
incompatble with the filesystem encoding replaced</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.notebook.notebook">
<span id="zim-notebook-notebook-module"></span><h2>zim.notebook.notebook module<a class="headerlink" href="#module-zim.notebook.notebook" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt id="zim.notebook.notebook.IndexNotUptodateError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">IndexNotUptodateError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.IndexNotUptodateError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="zim.notebook.notebook.Notebook">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">Notebook</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.signals.ConnectorMixin" title="zim.signals.ConnectorMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.ConnectorMixin</span></code></a>, <a class="reference internal" href="zim.html#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.SignalEmitter</span></code></a></p>
<p>Main class to access a notebook</p>
<p>This class defines an API that proxies between backend <code class="xref py py-class docutils literal notranslate"><span class="pre">zim.stores</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> objects on the one hand and the user interface on the
other hand. (See <a class="reference internal" href="#module-zim.notebook" title="zim.notebook"><code class="xref py py-class docutils literal notranslate"><span class="pre">module</span> <span class="pre">docs</span></code></a> for more explanation.)</p>
<dl class="field-list simple">
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">store-page</span> <span class="pre">(page)</span></code>: emitted before actually storing the page</p>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">stored-page</span> <span class="pre">(page)</span></code>: emitted after storing the page</p>
</dd>
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">move-page</span> <span class="pre">(oldpath,</span> <span class="pre">newpath)</span></code>: emitted before
actually moving a page</p>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">moved-page</span> <span class="pre">(oldpath,</span> <span class="pre">newpath)</span></code>: emitted after
moving the page</p>
</dd>
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">delete-page</span> <span class="pre">(path)</span></code>: emitted before deleting a page</p>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">deleted-page</span> <span class="pre">(path)</span></code>: emitted after deleting a page
means that the preferences need to be loaded again as well</p>
</dd>
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">suggest-link</span> <span class="pre">(path,</span> <span class="pre">text)</span></code>: hook that is called when trying
to resolve links</p>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">get-page-template</span> <span class="pre">(path)</span></code>: emitted before
when a template for a new page is requested, intended for plugins that
want to customize a namespace</p>
</dd>
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">init-page-template</span> <span class="pre">(path,</span> <span class="pre">template)</span></code>: emitted before
evaluating a template for a new page, intended for plugins that want
to extend page templates</p>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="zim.html#zim.applications.Application.name" title="zim.applications.Application.name"><strong>name</strong></a> – The name of the notebook (string)</p></li>
<li><p><a class="reference internal" href="zim.html#zim.www.WWWLinker.icon" title="zim.www.WWWLinker.icon"><strong>icon</strong></a> – The path for the notebook icon (if any)
# FIXME should be <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object</p></li>
<li><p><strong>document_root</strong> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code> object for the X{document root} (if any)</p></li>
<li><p><a class="reference internal" href="zim.html#zim.fs.UnixPath.dir" title="zim.fs.UnixPath.dir"><strong>dir</strong></a> – Optional <code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code> object for the X{notebook folder}</p></li>
<li><p><a class="reference internal" href="zim.html#zim.fs.Dir.file" title="zim.fs.Dir.file"><strong>file</strong></a> – Optional <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object for the X{notebook file}</p></li>
<li><p><strong>cache_dir</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code> object for the folder used to cache notebook state</p></li>
<li><p><a class="reference internal" href="zim.config.html#module-zim.config" title="zim.config"><strong>config</strong></a> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">SectionedConfigDict</span></code> for the notebook config
(the <code class="docutils literal notranslate"><span class="pre">X{notebook.zim</span></code>} config file in the notebook folder)</p></li>
<li><p><a class="reference internal" href="zim.html#zim.history.HistoryList.index" title="zim.history.HistoryList.index"><strong>index</strong></a> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> object used by the notebook</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.delete_page">
<code class="sig-name descname">delete_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.delete_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.delete_page_iter">
<code class="sig-name descname">delete_page_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.delete_page_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.eval_new_page_template">
<code class="sig-name descname">eval_new_page_template</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">template</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.eval_new_page_template" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.get_attachments_dir">
<code class="sig-name descname">get_attachments_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.get_attachments_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the X{attachment folder} for a specific page</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
<p>Always returns a Dir object when the page can have an attachment
folder, even when the folder does not (yet) exist. However when
<code class="docutils literal notranslate"><span class="pre">None</span></code> is returned the store implementation does not support
an attachments folder for this page.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.get_home_page">
<code class="sig-name descname">get_home_page</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.get_home_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object for the home page</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.get_new_page">
<code class="sig-name descname">get_new_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.get_new_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Like get_page() but guarantees the page does not yet exist
by adding a number to the name to make it unique.</p>
<p>This method is intended for cases where e.g. a automatic script
wants to store a new page without user interaction. Conflicts
are resolved automatically by appending a number to the name
if the page already exists. Be aware that the resulting Page
object may not match the given Path object because of this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.get_page">
<code class="sig-name descname">get_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.get_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object for a given path</p>
<p>Typically a Page object will be returned even when the page
does not exist. In this case the <code class="docutils literal notranslate"><span class="pre">hascontent</span></code> attribute of
the Page will be <code class="docutils literal notranslate"><span class="pre">False</span></code> and <code class="docutils literal notranslate"><span class="pre">get_parsetree()</span></code> will return
<code class="docutils literal notranslate"><span class="pre">None</span></code>. This means that you do not have to create a page
explicitly, just get the Page object and store it with new
content (if it is not read-only of course).</p>
<p>However in some cases this method will return <code class="docutils literal notranslate"><span class="pre">None</span></code>. This
means that not only does the page not exist, but also that it
can not be created. This should only occur for certain special
pages and depends on the store implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.get_page_template_name">
<code class="sig-name descname">get_page_template_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.get_page_template_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the template to use for a new page.
(To get the contents of the template directly, see <a class="reference internal" href="#zim.notebook.notebook.Notebook.get_template" title="zim.notebook.notebook.Notebook.get_template"><code class="xref py py-class docutils literal notranslate"><span class="pre">get_template()</span></code></a>)</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.get_template">
<code class="sig-name descname">get_template</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.get_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a template for the intial text on new pages</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">ParseTree</span></code> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.info">
<em class="property">property </em><code class="sig-name descname">info</code><a class="headerlink" href="#zim.notebook.notebook.Notebook.info" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code> object for this notebook</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.move_page">
<code class="sig-name descname">move_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">newpath</span></em>, <em class="sig-param"><span class="n">update_links</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">update_heading</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.move_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Move and/or rename a page in the notebook</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object for the old/current page name</p></li>
<li><p><strong>newpath</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object for the new page name</p></li>
<li><p><strong>update_links</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> all links <strong>from</strong> and <strong>to</strong> this
page and any of it’s children will be updated to reflect the
new page name</p></li>
<li><p><strong>update_heading</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> the heading of the page will be
changed to the basename of the new path</p></li>
</ul>
</dd>
</dl>
<p>The original page <code class="docutils literal notranslate"><span class="pre">path</span></code> does not have to exist, in this case
only the link update will done. This is useful to update links
for a placeholder.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#zim.notebook.notebook.PageExistsError" title="zim.notebook.notebook.PageExistsError"><strong>PageExistsError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">newpath</span></code> already exists</p>
</dd>
<dt class="field-even">Emits</dt>
<dd class="field-even"><p>move-page before the move</p>
</dd>
<dt class="field-odd">Emits</dt>
<dd class="field-odd"><p>moved-page after successfull move</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.move_page_iter">
<code class="sig-name descname">move_page_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.move_page_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.new_from_dir">
<em class="property">classmethod </em><code class="sig-name descname">new_from_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.new_from_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor to create a notebook based on a specific
file system location.
Since the file system is an external resource, this method
will return unique objects per location and keep (weak)
references for re-use.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dir</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.notebook.notebook.Notebook" title="zim.notebook.notebook.Notebook"><code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.on_properties_changed">
<code class="sig-name descname">on_properties_changed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">properties</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.on_properties_changed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.relative_filepath">
<code class="sig-name descname">relative_filepath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.relative_filepath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a file path relative to the notebook or page</p>
<p>Intended as the counter part of <a class="reference internal" href="#zim.notebook.notebook.Notebook.resolve_file" title="zim.notebook.notebook.Notebook.resolve_file"><code class="xref py py-class docutils literal notranslate"><span class="pre">resolve_file()</span></code></a>. Typically
this function is used to present the user with readable paths or to
shorten the paths inserted in the wiki code. It is advised to
use file URIs for links that can not be made relative with
this method.</p>
<dl class="simple">
<dt>The link can be relative:</dt><dd><ul class="simple">
<li><p>to the <code class="docutils literal notranslate"><span class="pre">document</span> <span class="pre">root</span></code> (link will start with “/”)</p></li>
<li><p>the attachments dir (if a <code class="docutils literal notranslate"><span class="pre">path</span></code> is given) or the notebook
(links starting with “./” or “../”)</p></li>
<li><p>or the users home dir (link like “~/user/”)</p></li>
</ul>
</dd>
</dl>
<p>Relative file paths are always given with Unix path semantics
(so “/” even on windows). But a leading “/” does not mean the
path is absolute, but rather that it is relative to the
X{document root}.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object we want to link</p></li>
<li><p><strong>path</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object for the page where we want to
link this file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>relative file path as string, or <code class="docutils literal notranslate"><span class="pre">None</span></code> when no
relative path was found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.resolve_file">
<code class="sig-name descname">resolve_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.resolve_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve a file or directory path relative to a page or
Notebook</p>
<p>This method is intended to lookup file links found in pages and
turn resolve the absolute path of those files.</p>
<p>File URIs and paths that start with ‘~/’ or ‘~user/’ are
considered absolute paths. Also windows path names like
‘C:user’ are recognized as absolute paths.</p>
<p>Paths that starts with a ‘/’ are taken relative to the
to the <code class="docutils literal notranslate"><span class="pre">document</span> <span class="pre">root</span></code> - this can e.g. be a parent directory
of the notebook. Defaults to the filesystem root when no document
root is set. (So can be relative or absolute depending on the
notebook settings.)</p>
<p>Paths starting with any other character are considered
attachments. If <code class="docutils literal notranslate"><span class="pre">path</span></code> is given they are resolved relative to
the <code class="docutils literal notranslate"><span class="pre">attachment</span> <span class="pre">folder</span></code> of that page, otherwise they are
resolved relative to the <code class="docutils literal notranslate"><span class="pre">notebook</span> <span class="pre">folder</span></code> - if any.</p>
<p>The file is resolved purely based on the path, it does not have
to exist at all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the (relative) file path or uri as string</p></li>
<li><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object for the page</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.save_properties">
<code class="sig-name descname">save_properties</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.save_properties" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.store_page">
<code class="sig-name descname">store_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.store_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.store_page_async">
<code class="sig-name descname">store_page_async</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.store_page_async" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.suggest_link">
<code class="sig-name descname">suggest_link</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">word</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.suggest_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Suggest a link Path for ‘word’ or return None if no suggestion is
found. By default we do not do any suggestion but plugins can
register handlers to add suggestions using the ‘<code class="docutils literal notranslate"><span class="pre">suggest-link</span></code>’
signal.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.trash_page">
<code class="sig-name descname">trash_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.trash_page" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.trash_page_iter">
<code class="sig-name descname">trash_page_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.trash_page_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.uri">
<em class="property">property </em><code class="sig-name descname">uri</code><a class="headerlink" href="#zim.notebook.notebook.Notebook.uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference external" href="file://">file://</a> uri for this notebook that can be opened by zim</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.notebook.Notebook.wait_for_store_page_async">
<code class="sig-name descname">wait_for_store_page_async</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.Notebook.wait_for_store_page_async" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.notebook.NotebookConfig">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">NotebookConfig</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.NotebookConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.config.html#zim.config.dicts.INIConfigFile" title="zim.config.dicts.INIConfigFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.config.dicts.INIConfigFile</span></code></a></p>
<p>Wrapper for the X{notebook.zim} file</p>
</dd></dl>

<dl class="py class">
<dt id="zim.notebook.notebook.NotebookExtension">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">NotebookExtension</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.NotebookExtension" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.plugins.html#zim.plugins.ExtensionBase" title="zim.plugins.ExtensionBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.plugins.ExtensionBase</span></code></a></p>
<p>Base class for extending the notebook</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><a class="reference internal" href="zim.export.html#zim.export.selections.PageSelection.notebook" title="zim.export.selections.PageSelection.notebook"><strong>notebook</strong></a> – the <a class="reference internal" href="#zim.notebook.notebook.Notebook" title="zim.notebook.notebook.Notebook"><code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.notebook.PageError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">PageError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.PageError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.notebook.PageExistsError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">PageExistsError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.PageExistsError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.notebook.PageNotAllowedError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">PageNotAllowedError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.PageNotAllowedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.notebook.notebook.PageNotFoundError" title="zim.notebook.notebook.PageNotFoundError"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.notebook.PageNotFoundError</span></code></a></p>
<dl class="py attribute">
<dt id="zim.notebook.notebook.PageNotAllowedError.description">
<code class="sig-name descname">description</code><em class="property"> = 'This page name cannot be used due to technical limitations of the storage'</em><a class="headerlink" href="#zim.notebook.notebook.PageNotAllowedError.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.notebook.PageNotAvailableError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">PageNotAvailableError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.PageNotAvailableError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.notebook.notebook.PageNotFoundError" title="zim.notebook.notebook.PageNotFoundError"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.notebook.PageNotFoundError</span></code></a></p>
<dl class="py attribute">
<dt id="zim.notebook.notebook.PageNotAvailableError.description">
<code class="sig-name descname">description</code><em class="property"> = 'This page name cannot be used due to a conflicting file in the storage'</em><a class="headerlink" href="#zim.notebook.notebook.PageNotAvailableError.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.notebook.PageNotFoundError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">PageNotFoundError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.PageNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.notebook.notebook.PageError" title="zim.notebook.notebook.PageError"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.notebook.PageError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.notebook.PageReadOnlyError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">PageReadOnlyError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.PageReadOnlyError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.notebook.assert_index_uptodate">
<code class="sig-prename descclassname">zim.notebook.notebook.</code><code class="sig-name descname">assert_index_uptodate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.notebook.assert_index_uptodate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zim.notebook.operations">
<span id="zim-notebook-operations-module"></span><h2>zim.notebook.operations module<a class="headerlink" href="#module-zim.notebook.operations" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes and functions needed for concurrent use
of the notebook data.</p>
<p>Summary:</p>
<blockquote>
<div><ul class="simple">
<li><p>Notebook, page and related data structures are <em>not</em> thread safe</p></li>
<li><dl class="simple">
<dt>Concurrency in the Gtk/Glib main loop is handled by generator</dt><dd><p>functions wrapped in “NotebookOperation” objects</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>The notebook and page objects are <em>not</em> thread safe, so threaded usage
needs to be managed carefully. Full thread safe design has been
investigated but deemed too complicated. Key here is that all
changes need to be communicated to the Gtk widgets of the interface
by signals and Gtk does not support threaded usage on all platforms.
There are ways to combine threaded usage with Gtk (e.g. by using an
idle event in the main loop to update widget) however this quickly
becomes a source of potential race conditions between threads.</p>
<p>Therefore the concurrency model chosen is the Gtk/Glib main loop. This
loop operates in a single thread, but allows interweaving actions by
breaking up long running actions and using idle events in the loop to
execute blocks. Implementation of this style is typically to have a
generator function to do the work and attach it to the idle event such
that it executes one step of the generator every time. When the generator
yields, other actions can be done in the mainloop.</p>
<p>This style does not necessarily mean that a lot of application logic is
done in parallel, but at least the interface is re-drawn, e.g. when the
user moves the window during the operation, and e.g. progress dialogs
can be used.</p>
<p>Limited use of threads is made, e.g. for blocking I/O and for indexing,
but these are specific uses that are made thread safe, this does not
generalize to the public APIs.</p>
<p>To make the use of the “generator style” concurrency more convenient
we introduce the concept of a notebook “operation”. By this we mean
any type of action that needs a consistent notebook state over multiple
iterations. Examples are updating the index, moving a page and updating
links to the page, but also exporting the notebook. All these examples
would use a progress dialog of some kind.</p>
<p>Such an operations is attached to the notebook object, such that no
other operation can start at the same time. So only one operation can
be active for a given notebook at the same time. Also methods that
change the notebook cannot be used by other events while an operation
is active. In case of conflicts an error is raised that can be shown
to the user.</p>
<p>So apart from re-drawing the interface also other actions can happen
in the application while the operation is running, but these should be
limited to “read-only” access to the notebook.</p>
<p>See also:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>For more information about threading and the generator style</dt><dd><p>concurency with Gtk/GLib, see
<a class="reference external" href="https://wiki.gnome.org/Projects/PyGObject/Threading">https://wiki.gnome.org/Projects/PyGObject/Threading</a></p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>Move page and update links (or other multi-part change):</p>
<blockquote>
<div><ul class="simple">
<li><p>show progress dialog</p></li>
<li><p>use operation with notebook.move_page_iter()</p></li>
</ul>
</div></blockquote>
<p>Export notebook (or other multi-part notebook access):</p>
<blockquote>
<div><ul class="simple">
<li><p>show progress dialog</p></li>
<li><p>use operation with exporter.export_iter()</p></li>
</ul>
</div></blockquote>
<p>Save page with asynchronous I/O:</p>
<blockquote>
<div><ul class="simple">
<li><p>Modify page object &amp; update index based on the page object</p></li>
<li><p>Sync to disk in separate thread, use operation to monitor thread</p></li>
<li><p>Update index with file info after write (to avoid re-indexing later)</p></li>
</ul>
</div></blockquote>
<p>This is a special case using a thread to handle the asynchronous I/O.
Here it is allowed because the thread does not use the notebook objects.
However it does not use a generator to do work in the main loop, just
to monitor the thread. An operation is still used because we want the
thread to finish before the next thing happens.</p>
<p>Index updates:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>If index is out-of-date at start, run update as operation with</dt><dd><p>progress dialog</p>
</dd>
</dl>
</li>
<li><p>Else start thread to find out-of-date records (this is not an operation!)</p></li>
<li><dl class="simple">
<dt>If out-of-date records are found queue an trigger on idle to start</dt><dd><p>updating (if another operation is active, delay with a timeout
until notebook is unlocked)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Run update as operation with progress bar in window, but not</dt><dd><p>blocking the window (assume updates are small)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>When the user selects “update index” in the menu, or another action</dt><dd><p>that explicitly asks to ensure index up to date (e.g. export)</p>
</dd>
</dl>
</li>
<li><p>If index operation is ongoing, attach progress dialog</p></li>
<li><p>Else start new update with progress dialog</p></li>
</ul>
</div></blockquote>
<p>The use of a thread here is allowed because it only acts on the index,
not on the notebook. However index updates in the operation or index
updates due to e.g. a page save should not conflict with the indexer
thread. To avoid this, the index must have a thread lock that allows
switching control of the database between the two threads.</p>
<p>The background index will also iterate and aquire &amp; release again the
lock for each iteration. The operation start will block to aquire the
lock (thus putting the indexer on hold if it did not finish yet).
Also index updates e.g. because of a page save or page move will block
to aquire the lock. (Since such actions also require the operation
“lock” this will never happen while an update is prepared.)</p>
<dl class="py function">
<dt id="zim.notebook.operations.NOOP">
<code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">NOOP</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NOOP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="zim.notebook.operations.NotebookOperation">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">NotebookOperation</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookOperation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.SignalEmitter</span></code></a></p>
<p>This class is used to wrap generators that execute multiple
steps of an operation.</p>
<p>Intended usage:</p>
<blockquote>
<div><dl class="simple">
<dt>op = NotebookOperation(</dt><dd><p>notebook,
_(‘Updating index’),
notebook.index.update_iter</p>
</dd>
</dl>
<p>)
op.run_on_idle()</p>
</div></blockquote>
<p>This will start the operation using ‘idle’ events in the main loop
to iterate through to operation steps.</p>
<p>If you want to wait for the operation to finish, use a progress
dialog like this:</p>
<blockquote>
<div><p>dialog = ProgressDialog(window, op)
dialog.run()</p>
</div></blockquote>
<p>When using the progress dialog the values yielded by the inner
iterator will be passed on via the ‘step’ signal. This should be a
3-tuple of <code class="docutils literal notranslate"><span class="pre">(i,</span> <span class="pre">total,</span> <span class="pre">msg)</span></code> where <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">total</span></code> are integers for the
current step and the total number of steps expected (or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the step
count is not known).</p>
<dl class="py method">
<dt id="zim.notebook.operations.NotebookOperation.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookOperation.cancel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.operations.NotebookOperation.is_running">
<code class="sig-name descname">is_running</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookOperation.is_running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.operations.NotebookOperation.run_on_idle">
<code class="sig-name descname">run_on_idle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookOperation.run_on_idle" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the operation by setting up the main loop event handler.</p>
<p>May raise <a class="reference internal" href="#zim.notebook.operations.NotebookOperationOngoing" title="zim.notebook.operations.NotebookOperationOngoing"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookOperationOngoing</span></code></a> if another operation is
already ongoing.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.operations.NotebookOperation.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookOperation.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.notebook.operations.NotebookOperationOngoing">
<em class="property">exception </em><code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">NotebookOperationOngoing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookOperationOngoing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="zim.notebook.operations.NotebookState">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">NotebookState</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.NotebookState" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Context manager that can be used to wrap code that does not
allow for operations to run in parallel fashion.</p>
<p>All notebook methods that modify the notebook are protected by
default with this context. However if you for some reason want to
find out earlier whether or not an error will happen you can use
this context explicitly.</p>
<p>Entering the context may raise <a class="reference internal" href="#zim.notebook.operations.NotebookOperationOngoing" title="zim.notebook.operations.NotebookOperationOngoing"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookOperationOngoing</span></code></a> if an
operation is ongoing.</p>
<p>Intended usage:</p>
<blockquote>
<div><dl class="simple">
<dt>with NotebookState(notebook):</dt><dd><p>page = notebook.get_page(path)
# modify …
notebook.store_page(page)</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt id="zim.notebook.operations.SimpleAsyncOperation">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">SimpleAsyncOperation</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.SimpleAsyncOperation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.notebook.operations.NotebookOperation" title="zim.notebook.operations.NotebookOperation"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.operations.NotebookOperation</span></code></a></p>
<p>Variant of NotebookOperation that monitors a thread.
Key difference is that instead of raising an exception when another
operation tries to start it will wait for the thread. So only
useful for short run time threads, like async file write.</p>
<dl class="py method">
<dt id="zim.notebook.operations.SimpleAsyncOperation.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.SimpleAsyncOperation.cancel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.operations.SimpleAsyncOperation.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.SimpleAsyncOperation.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.notebook.operations.notebook_state">
<code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">notebook_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">method</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.notebook_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for notebook API methods that behaves
like the <a class="reference internal" href="#zim.notebook.operations.NotebookState" title="zim.notebook.operations.NotebookState"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookState</span></code></a> context.</p>
<p>Intended only for methods that change the notebook.</p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.operations.ongoing_operation">
<code class="sig-prename descclassname">zim.notebook.operations.</code><code class="sig-name descname">ongoing_operation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.operations.ongoing_operation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="module-zim.notebook.page">
<span id="zim-notebook-page-module"></span><h2>zim.notebook.page module<a class="headerlink" href="#module-zim.notebook.page" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="zim.notebook.page.HRef">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.page.</code><code class="sig-name descname">HRef</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rel</span></em>, <em class="sig-param"><span class="n">names</span></em>, <em class="sig-param"><span class="n">anchor</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.HRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt id="zim.notebook.page.HRef.anchor">
<code class="sig-name descname">anchor</code><a class="headerlink" href="#zim.notebook.page.HRef.anchor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.notebook.page.HRef.names">
<code class="sig-name descname">names</code><a class="headerlink" href="#zim.notebook.page.HRef.names" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.HRef.new_from_wiki_link">
<em class="property">classmethod </em><code class="sig-name descname">new_from_wiki_link</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">href</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.HRef.new_from_wiki_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor that constructs a <a class="reference internal" href="#zim.notebook.page.HRef" title="zim.notebook.page.HRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">HRef</span></code></a> object for a link as
written in zim’s wiki syntax.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>href</strong> – a string for the link</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.notebook.page.HRef" title="zim.notebook.page.HRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">HRef</span></code></a> object</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – when the string could not be parsed
(see <a class="reference internal" href="#zim.notebook.page.Path.makeValidPageName" title="zim.notebook.page.Path.makeValidPageName"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path.makeValidPageName()</span></code></a>)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method HRef class assumes the logic of our wiki links
for other formats, a separate constructor may be needed</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.HRef.parts">
<code class="sig-name descname">parts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.HRef.parts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.notebook.page.HRef.rel">
<code class="sig-name descname">rel</code><a class="headerlink" href="#zim.notebook.page.HRef.rel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.HRef.to_wiki_link">
<code class="sig-name descname">to_wiki_link</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.HRef.to_wiki_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns href as text for wiki link</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.page.Page">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.page.</code><code class="sig-name descname">Page</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.page.Path</span></code></a>, <a class="reference internal" href="zim.html#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.SignalEmitter</span></code></a></p>
<p>Class to represent a single page in the notebook.</p>
<p>Page objects inherit from <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> but have internal state reflecting
content in the notebook. We try to keep Page objects unique
by hashing them in <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook.get_page()</span></code>, Path object on the other
hand are cheap and can have multiple instances for the same logical path.
We ask for a path object instead of a name in the constructor to
encourage the use of Path objects over passing around page names as
string.</p>
<p>You can use a Page object instead of a Path anywhere in the APIs where
a path is needed as argument etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#zim.notebook.page.Page.name" title="zim.notebook.page.Page.name"><strong>name</strong></a> – full page name (inherited from <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#zim.notebook.page.Page.hascontent" title="zim.notebook.page.Page.hascontent"><strong>hascontent</strong></a> – <code class="docutils literal notranslate"><span class="pre">True</span></code> if the page has content</p></li>
<li><p><a class="reference internal" href="zim.notebook.index.html#zim.notebook.index.pages.PageIndexRecord.haschildren" title="zim.notebook.index.pages.PageIndexRecord.haschildren"><strong>haschildren</strong></a> – <code class="docutils literal notranslate"><span class="pre">True</span></code> if the page has sub-pages</p></li>
<li><p><a class="reference internal" href="#zim.notebook.page.Page.modified" title="zim.notebook.page.Page.modified"><strong>modified</strong></a> – <code class="docutils literal notranslate"><span class="pre">True</span></code> if the page was modified since the last
store. Will be reset by <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook.store_page()</span></code></p></li>
<li><p><a class="reference internal" href="#zim.notebook.page.Page.readonly" title="zim.notebook.page.Page.readonly"><strong>readonly</strong></a> – <code class="docutils literal notranslate"><span class="pre">True</span></code> when the page is read-only</p></li>
</ul>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">storage-changed</span> <span class="pre">(changed-on-disk)</span></code>: signal emitted on page
change. The argument “changed-on-disk” is <code class="docutils literal notranslate"><span class="pre">True</span></code> when an external
edit was detected. For internal edits it is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">modified-changed</span> <span class="pre">()</span></code>: emitted when the page is edited</p>
</dd>
</dl>
<dl class="py method">
<dt id="zim.notebook.page.Page.append_parsetree">
<code class="sig-name descname">append_parsetree</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tree</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.append_parsetree" title="Permalink to this definition">¶</a></dt>
<dd><p>Append content</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tree</strong> – a <a class="reference internal" href="zim.formats.html#zim.formats.ParseTree" title="zim.formats.ParseTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.formats.ParseTree</span></code></a> object with content</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.check_source_changed">
<code class="sig-name descname">check_source_changed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.check_source_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks for changes in the source file and load it if needed</p>
<p>If the page has a <code class="docutils literal notranslate"><span class="pre">textbuffer</span></code> and it contains unsaved changes, this
method will not overwrite them and you’ll get an error on next attempt
to save. To force overwrite see <a class="reference internal" href="#zim.notebook.page.Page.reload_textbuffer" title="zim.notebook.page.Page.reload_textbuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">reload_textbuffer()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.ctime">
<em class="property">property </em><code class="sig-name descname">ctime</code><a class="headerlink" href="#zim.notebook.page.Page.ctime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.dump">
<code class="sig-name descname">dump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">linker</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Get content in a specific format</p>
<p>Convenience method that converts the current parse tree to a
particular format first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> – either a format module or a string
that is understood by <a class="reference internal" href="zim.formats.html#zim.formats.get_format" title="zim.formats.get_format"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.formats.get_format()</span></code></a>.</p></li>
<li><p><strong>linker</strong> – a linker object (see e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLinker</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>text as a list of lines or an empty list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.exists" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the page has either content or children</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.get_anchors">
<code class="sig-name descname">get_anchors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.get_anchors" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator returning all the (explicit) anchors in the page content</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.get_links">
<code class="sig-name descname">get_links</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.get_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for links in the page content</p>
<p>This method gives the raw links from the content, if you want
nice <code class="xref py py-class docutils literal notranslate"><span class="pre">Link</span></code> objects use
<code class="xref py py-class docutils literal notranslate"><span class="pre">index.list_links()</span></code> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>yields a list of 3-tuples <code class="docutils literal notranslate"><span class="pre">(type,</span> <span class="pre">href,</span> <span class="pre">attrib)</span></code>
where:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> is the link type (e.g. “page” or “file”)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">href</span></code> is the link itself</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attrib</span></code> is a dict with link properties</p></li>
</ul>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.get_parsetree">
<code class="sig-name descname">get_parsetree</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.get_parsetree" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the contents of the page</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="zim.formats.html#zim.formats.ParseTree" title="zim.formats.ParseTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.formats.ParseTree</span></code></a> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.get_tags">
<code class="sig-name descname">get_tags</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.get_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for tags in the page content</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>yields an unordered list of unique 2-tuples
<code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">attrib)</span></code> for tags in the parsetree.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.get_textbuffer">
<code class="sig-name descname">get_textbuffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">constructor</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.get_textbuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <code class="docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code> for the page</p>
<p>Will either return an existing buffer or construct a new one and return
it. A <code class="docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code> can be shared between multiple <a href="#id1"><span class="problematic" id="id2">``</span></a>Gtk.TextView``s.
The page object owns the textbuffer to allow multiple views on the same
page.</p>
<p>Once a buffer is set, also methods like <a class="reference internal" href="#zim.notebook.page.Page.get_parsetree" title="zim.notebook.page.Page.get_parsetree"><code class="xref py py-class docutils literal notranslate"><span class="pre">get_parsetree()</span></code></a> and
<a class="reference internal" href="#zim.notebook.page.Page.get_parsetree" title="zim.notebook.page.Page.get_parsetree"><code class="xref py py-class docutils literal notranslate"><span class="pre">get_parsetree()</span></code></a> will interact with this buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constructor</strong> – if not buffer was set previously, this function
is called to construct the buffer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="docutils literal notranslate"><span class="pre">TextBuffer</span></code> object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no buffer is set and
no constructor is provided.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.get_title">
<code class="sig-name descname">get_title</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.get_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.hascontent">
<em class="property">property </em><code class="sig-name descname">hascontent</code><a class="headerlink" href="#zim.notebook.page.Page.hascontent" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether this page has content</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.heading_matches_pagename">
<code class="sig-name descname">heading_matches_pagename</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.heading_matches_pagename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the heading matches the page name.
Used to determine whether the page should have its heading
auto-changed on rename/move.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the heading can be auto-changed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.isequal">
<code class="sig-name descname">isequal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.isequal" title="Permalink to this definition">¶</a></dt>
<dd><p>Check equality of pages
This method is intended to deal with case-insensitive storage
backends (e.g. case insensitive file system) where the method
is supposed to check equality of the resource.
Note that this may be the case even when the page objects differ
and can have a different name (so <code class="xref py py-class docutils literal notranslate"><span class="pre">__cmp__</span></code> will not show
them to be equal). However default falls back to <code class="xref py py-class docutils literal notranslate"><span class="pre">__cmp__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> of both page objects point to the same resource</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>can be implementated by subclasses</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.modified">
<em class="property">property </em><code class="sig-name descname">modified</code><a class="headerlink" href="#zim.notebook.page.Page.modified" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.mtime">
<em class="property">property </em><code class="sig-name descname">mtime</code><a class="headerlink" href="#zim.notebook.page.Page.mtime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.notebook.page.Page.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#zim.notebook.page.Page.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.on_buffer_modified_changed">
<code class="sig-name descname">on_buffer_modified_changed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.on_buffer_modified_changed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">append</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Store formatted text in the page</p>
<p>Convenience method that parses text and sets the parse tree
accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> – either a format module or a string
that is understood by <a class="reference internal" href="zim.formats.html#zim.formats.get_format" title="zim.formats.get_format"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.formats.get_format()</span></code></a>.</p></li>
<li><p><strong>text</strong> – text as a string or as a list of lines</p></li>
<li><p><strong>append</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> the text is appended instead of
replacing current content.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.readonly">
<em class="property">property </em><code class="sig-name descname">readonly</code><a class="headerlink" href="#zim.notebook.page.Page.readonly" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.reload_textbuffer">
<code class="sig-name descname">reload_textbuffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.reload_textbuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload page content from source file and update the textbuffer if set</p>
<p>NOTE: this method overwrites any changes in the <code class="docutils literal notranslate"><span class="pre">textbuffer</span></code> or
<code class="docutils literal notranslate"><span class="pre">parsetree</span></code> that have not been saved to file !</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.set_modified">
<code class="sig-name descname">set_modified</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modified</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.set_modified" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Page.set_parsetree">
<code class="sig-name descname">set_parsetree</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tree</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Page.set_parsetree" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parsetree with content for this page</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tree</strong> – a <a class="reference internal" href="zim.formats.html#zim.formats.ParseTree" title="zim.formats.ParseTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.formats.ParseTree</span></code></a> object with content
or <code class="docutils literal notranslate"><span class="pre">None</span></code> to remove all content from the page</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>after setting new content in the Page object it still
needs to be stored in the notebook to save this content
permanently. See <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook.store_page()</span></code>.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.page.Path">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.page.</code><code class="sig-name descname">Path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class representing a page name in the notebook</p>
<blockquote>
<div><p>This is the parent class for the Page class. It contains the name
of the page and is used instead of the actual page object by methods
that only need to know the name of the page. Path objects have no
internal state and are essentially normalized page names. It also
has a number of methods to compare page names and determining what
the parent pages are etc.</p>
<dl class="field-list simple">
<dt class="field-odd">ivar name</dt>
<dd class="field-odd"><p>the full name of the path</p>
</dd>
<dt class="field-even">ivar parts</dt>
<dd class="field-even"><p>all the parts of the name (split on “:”)</p>
</dd>
<dt class="field-odd">ivar basename</dt>
<dd class="field-odd"><p>the basename of the path (last part of the name)</p>
</dd>
<dt class="field-even">ivar namespace</dt>
<dd class="field-even"><p>the name for the parent page or empty string</p>
</dd>
<dt class="field-odd">ivar isroot</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when this Path represents the top level namespace</p>
</dd>
<dt class="field-even">ivar parent</dt>
<dd class="field-even"><p>the <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> object for the parent page</p>
</dd>
</dl>
<p>A number of characters are not valid in page names as used in Zim
notebooks.</p>
<dl class="simple">
<dt>Reserved characters are:</dt><dd><ul class="simple">
<li><p>The ‘:’ is reserved as separator</p></li>
<li><p>The ‘?’ is reserved to encode url style options</p></li>
<li><p>The ‘#’ is reserved as anchor separator</p></li>
<li><p>The ‘/’ and ‘’ are reserved to distinguish file links &amp; urls</p></li>
<li><dl class="simple">
<dt>First character of each part MUST be alphanumeric</dt><dd><p>(including utf8 letters / numbers)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>For file system filenames we can not use:
‘’, ‘/’, ‘:’, ‘*’, ‘?’, ‘”’, ‘&lt;’, ‘&gt;’, ‘|’
(checked both win32 &amp; posix)</p>
<p>Do not allow ‘</p>
</div></blockquote>
<p>‘ and ‘ ‘ for obvious reasons</p>
<blockquote>
<div><p>Allowing ‘%’ will cause problems with sql wildcards sooner
or later - also for url decoding ambiguity it is better to
keep this one reserved.</p>
<p>All other characters are allowed in page names</p>
<p>Note that Zim version &lt; 0.42 used different rules that are not
fully compatible, this is important when upgrading old notebooks.
See <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook.cleanup_pathname_zim028()</span></code></p>
</div></blockquote>
<dl class="py method">
<dt id="zim.notebook.page.Path.assertValidPageName">
<em class="property">static </em><code class="sig-name descname">assertValidPageName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.assertValidPageName" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> if <code class="docutils literal notranslate"><span class="pre">name</span></code> does not represent
a valid page name.
This is a strict check, most names that fail this test can still
be cleaned up by the <a class="reference internal" href="#zim.notebook.page.Path.makeValidPageName" title="zim.notebook.page.Path.makeValidPageName"><code class="xref py py-class docutils literal notranslate"><span class="pre">makeValidPageName()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – a string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – if the name is not valid</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.basename">
<em class="property">property </em><code class="sig-name descname">basename</code><a class="headerlink" href="#zim.notebook.page.Path.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the basename of the path (last part of the name)</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.child">
<code class="sig-name descname">child</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">basename</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.child" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a child Path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>basename</strong> – the relative name for the child</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a new <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.commonparent">
<code class="sig-name descname">commonparent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.commonparent" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a common parent for two Paths</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – another <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> object for the first common parent</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.ischild">
<code class="sig-name descname">ischild</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.ischild" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether this path is a child of a given path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parent</strong> – a <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True when this path is a (grand-)child of <code class="docutils literal notranslate"><span class="pre">parent</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.isroot">
<em class="property">property </em><code class="sig-name descname">isroot</code><a class="headerlink" href="#zim.notebook.page.Path.isroot" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when this Path represents the top level namespace</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.makeValidPageName">
<em class="property">static </em><code class="sig-name descname">makeValidPageName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.makeValidPageName" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any invalid characters from the string and return
a valid page name. Only string that can not be turned in
somthing valid is a string that reduces to an empty string
after removing all invalid characters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – a string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – when the result would be an empty string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.match_namespace">
<code class="sig-name descname">match_namespace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">namespace</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.match_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether this path is in a specific section of the notebook</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> – a <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True when this path is equal to <code class="docutils literal notranslate"><span class="pre">namespace</span></code> or is a (grand-)child of <code class="docutils literal notranslate"><span class="pre">namespace</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zim.notebook.page.Path.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#zim.notebook.page.Path.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.namespace">
<em class="property">property </em><code class="sig-name descname">namespace</code><a class="headerlink" href="#zim.notebook.page.Path.namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives the name for the parent page.
Returns an empty string for the top level namespace.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.new_from_zim_config">
<em class="property">classmethod </em><code class="sig-name descname">new_from_zim_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.new_from_zim_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new object based on the string representation for
that path.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.parent">
<em class="property">property </em><code class="sig-name descname">parent</code><a class="headerlink" href="#zim.notebook.page.Path.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path for the parent page</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.parents">
<code class="sig-name descname">parents</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.parents" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator function for parent Paths including root</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.parts">
<em class="property">property </em><code class="sig-name descname">parts</code><a class="headerlink" href="#zim.notebook.page.Path.parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the parts of the name (split on “:”)</p>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.relname">
<code class="sig-name descname">relname</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.relname" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a part of this path relative to a parent path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a parent <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a></p>
</dd>
</dl>
<p>Raises an error if <code class="docutils literal notranslate"><span class="pre">path</span></code> is not a parent</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the part of the path that is relative to <code class="docutils literal notranslate"><span class="pre">path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.Path.serialize_zim_config">
<code class="sig-name descname">serialize_zim_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.Path.serialize_zim_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name for serializing this path</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.notebook.page.SourceFile">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.page.</code><code class="sig-name descname">SourceFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">checkoverwrite</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">endofline</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.SourceFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.html#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.File</span></code></a></p>
<dl class="py method">
<dt id="zim.notebook.page.SourceFile.iswritable">
<code class="sig-name descname">iswritable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.SourceFile.iswritable" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file or folder is writable. Uses permissions of
parent folder if the file or folder does not (yet) exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file or folder is writable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.SourceFile.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.SourceFile.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write file contents from string. This overwrites the current
content. Will automatically create all parent folders.
If writing fails the file will either have the new content or the
old content, but it should not be possible to have the content
truncated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – <p>new content as (unicode) string</p>
<dl class="field-list simple">
<dt class="field-odd">emits</dt>
<dd class="field-odd"><p>path-created if the file did not yet exist</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.notebook.page.SourceFile.writelines">
<code class="sig-name descname">writelines</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.SourceFile.writelines" title="Permalink to this definition">¶</a></dt>
<dd><p>Write file contents from a list of lines.
Like <a class="reference internal" href="#zim.notebook.page.SourceFile.write" title="zim.notebook.page.SourceFile.write"><code class="xref py py-class docutils literal notranslate"><span class="pre">write()</span></code></a> but input is a list instead of a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lines</strong> – <p>new content as list of lines</p>
<dl class="field-list simple">
<dt class="field-odd">emits</dt>
<dd class="field-odd"><p>path-created if the file did not yet exist</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.notebook.page.shortest_unique_names">
<code class="sig-prename descclassname">zim.notebook.page.</code><code class="sig-name descname">shortest_unique_names</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">paths</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.page.shortest_unique_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the shortest unique name for each path in paths</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>paths</strong> – list of <a class="reference internal" href="#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> objects</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of strings</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.notebook">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-zim.notebook" title="Permalink to this headline">¶</a></h2>
<p>This module contains the main Notebook class and related classes.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Notebook</span></code> interface is the generic API for accessing and storing
pages and other data in the notebook. The interface uses <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> objects
to indicate a specific page. See <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook.pages.lookup_from_user_input()</span></code>
to obtain a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> from a page name as string. Pages in the notebook
are represented by the <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object, which allows to access the page
contents.</p>
<p>The notebook keeps track of all pages using an <code class="docutils literal notranslate"><span class="pre">Index</span></code> which is stored
in a <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> database. Methods that need a list of pages in the
notebook always use the index rather than a direct lookup. See
<a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index" title="zim.notebook.index"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.index</span></code></a> for more details.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">NotebookInfoList</span></code> is defined to help access known notebooks and
a <code class="docutils literal notranslate"><span class="pre">NotebookInfo</span></code> object can be used to access the notebook properties
without instantiating a full <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object. Use the convience
methods <code class="xref py py-class docutils literal notranslate"><span class="pre">get_notebook_list()</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">resolve_notebook()</span></code> to obtain these
objects.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To open a notebook based on e.g. a commandline option it is
almost always better to use <a class="reference internal" href="#zim.notebook.build_notebook" title="zim.notebook.build_notebook"><code class="xref py py-class docutils literal notranslate"><span class="pre">build_notebook()</span></code></a> rather than istantiating
the notebook directly.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>for more information about threading and concurency,
see <a class="reference internal" href="#module-zim.notebook.operations" title="zim.notebook.operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.operations</span></code></a></p>
</div>
<dl class="py class">
<dt id="zim.notebook.ApplicationMountPointHandler">
<em class="property">class </em><code class="sig-prename descclassname">zim.notebook.</code><code class="sig-name descname">ApplicationMountPointHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir</span></em>, <em class="sig-param"><span class="n">mount</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">a</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.ApplicationMountPointHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.build_notebook">
<code class="sig-prename descclassname">zim.notebook.</code><code class="sig-name descname">build_notebook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">location</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.build_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object for a file location
Tries to automount file locations first if needed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>location</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code> or a <code class="xref py py-class docutils literal notranslate"><span class="pre">NotebookInfo</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object and a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="zim.html#zim.fs.FileNotFoundError" title="zim.fs.FileNotFoundError"><strong>FileNotFoundError</strong></a> – if file location does not exist and could not be mounted</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.init_notebook">
<code class="sig-prename descclassname">zim.notebook.</code><code class="sig-name descname">init_notebook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.init_notebook" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a new notebook in a directory</p>
</dd></dl>

<dl class="py function">
<dt id="zim.notebook.is_relevant_mount_point">
<code class="sig-prename descclassname">zim.notebook.</code><code class="sig-name descname">is_relevant_mount_point</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">root</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.is_relevant_mount_point" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.notebook.mount_notebook">
<code class="sig-prename descclassname">zim.notebook.</code><code class="sig-name descname">mount_notebook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filepath</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.notebook.mount_notebook" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Zim Desktop Wiki</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Jaap Karssenberg and contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="sources/zim.notebook.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>