
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>zim package &#8212; Zim Desktop Wiki 0.74 develop documentation</title>
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
    <script src="static/jquery.js"></script>
    <script src="static/underscore.js"></script>
    <script src="static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="zim-package">
<h1>zim package<a class="headerlink" href="#zim-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="zim.config.html">zim.config package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.config.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.config.html#module-zim.config.basedirs">zim.config.basedirs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.config.html#module-zim.config.dicts">zim.config.dicts module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.config.html#module-zim.config.manager">zim.config.manager module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.config.html#module-zim.config">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.export.html">zim.export package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="zim.export.exporters.html">zim.export.exporters package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.export.exporters.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.export.exporters.html#module-zim.export.exporters.files">zim.export.exporters.files module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.export.exporters.html#module-zim.export.exporters.mhtml">zim.export.exporters.mhtml module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.export.exporters.html#module-zim.export.exporters">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#module-zim.export.layouts">zim.export.layouts module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#module-zim.export.linker">zim.export.linker module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#module-zim.export.selections">zim.export.selections module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#module-zim.export.template">zim.export.template module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.export.html#module-zim.export">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.formats.html">zim.formats package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats.html">zim.formats.html module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats.latex">zim.formats.latex module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats.markdown">zim.formats.markdown module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats.plain">zim.formats.plain module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats.rst">zim.formats.rst module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats.wiki">zim.formats.wiki module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.formats.html#module-zim.formats">Module contents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="zim.formats.html#parse-tree-structure">Parse tree structure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.gui.html">zim.gui package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="zim.gui.pageview.html">zim.gui.pageview package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.gui.pageview.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.gui.pageview.html#module-zim.gui.pageview.editbar">zim.gui.pageview.editbar module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.gui.pageview.html#module-zim.gui.pageview">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.actionextension">zim.gui.actionextension module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.applications">zim.gui.applications module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.clipboard">zim.gui.clipboard module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.customtools">zim.gui.customtools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.exportdialog">zim.gui.exportdialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.insertedobjects">zim.gui.insertedobjects module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.mainwindow">zim.gui.mainwindow module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.navigation">zim.gui.navigation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.notebookdialog">zim.gui.notebookdialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.notebookview">zim.gui.notebookview module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.preferencesdialog">zim.gui.preferencesdialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.propertiesdialog">zim.gui.propertiesdialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.recentchangesdialog">zim.gui.recentchangesdialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.searchdialog">zim.gui.searchdialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.server">zim.gui.server module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.templateeditordialog">zim.gui.templateeditordialog module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.uiactions">zim.gui.uiactions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui.widgets">zim.gui.widgets module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.gui.html#module-zim.gui">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.inc.html">zim.inc package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.inc.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.inc.html#module-zim.inc.arithmetic">zim.inc.arithmetic module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.inc.html#module-zim.inc">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.main.html">zim.main package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.main.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.main.html#module-zim.main.command">zim.main.command module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.main.html#module-zim.main.ipc">zim.main.ipc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.main.html#module-zim.main">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.newfs.html">zim.newfs package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.newfs.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.newfs.html#module-zim.newfs.base">zim.newfs.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.newfs.html#module-zim.newfs.helpers">zim.newfs.helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.newfs.html#module-zim.newfs.local">zim.newfs.local module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.newfs.html#module-zim.newfs.mock">zim.newfs.mock module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.newfs.html#module-zim.newfs">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.notebook.html">zim.notebook package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="zim.notebook.index.html">zim.notebook.index package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.base">zim.notebook.index.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.files">zim.notebook.index.files module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.links">zim.notebook.index.links module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.pages">zim.notebook.index.pages module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index.tags">zim.notebook.index.tags module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.notebook.index.html#module-zim.notebook.index">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#module-zim.notebook.info">zim.notebook.info module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#module-zim.notebook.layout">zim.notebook.layout module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#module-zim.notebook.notebook">zim.notebook.notebook module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#module-zim.notebook.operations">zim.notebook.operations module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="zim.notebook.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#module-zim.notebook.page">zim.notebook.page module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.notebook.html#module-zim.notebook">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.plugins.html">zim.plugins package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="zim.plugins.attachmentbrowser.html">zim.plugins.attachmentbrowser package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.attachmentbrowser.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.attachmentbrowser.html#module-zim.plugins.attachmentbrowser.filebrowser">zim.plugins.attachmentbrowser.filebrowser module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.attachmentbrowser.html#module-zim.plugins.attachmentbrowser.filerenamedialog">zim.plugins.attachmentbrowser.filerenamedialog module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.attachmentbrowser.html#module-zim.plugins.attachmentbrowser.thumbnailer">zim.plugins.attachmentbrowser.thumbnailer module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.attachmentbrowser.html#module-zim.plugins.attachmentbrowser">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zim.plugins.base.html">zim.plugins.base package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.base.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.base.html#module-zim.plugins.base.imagegenerator">zim.plugins.base.imagegenerator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.base.html#module-zim.plugins.base">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zim.plugins.pageindex.html">zim.plugins.pageindex package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.pageindex.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.pageindex.html#module-zim.plugins.pageindex.generictreemodel">zim.plugins.pageindex.generictreemodel module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.pageindex.html#module-zim.plugins.pageindex">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zim.plugins.tasklist.html">zim.plugins.tasklist package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.tasklist.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.tasklist.html#module-zim.plugins.tasklist.dates">zim.plugins.tasklist.dates module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.tasklist.html#module-zim.plugins.tasklist.gui">zim.plugins.tasklist.gui module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.tasklist.html#module-zim.plugins.tasklist.indexer">zim.plugins.tasklist.indexer module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.tasklist.html#module-zim.plugins.tasklist">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="zim.plugins.versioncontrol.html">zim.plugins.versioncontrol package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.versioncontrol.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.versioncontrol.html#module-zim.plugins.versioncontrol.bzr">zim.plugins.versioncontrol.bzr module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.versioncontrol.html#module-zim.plugins.versioncontrol.fossil">zim.plugins.versioncontrol.fossil module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.versioncontrol.html#module-zim.plugins.versioncontrol.git">zim.plugins.versioncontrol.git module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.versioncontrol.html#module-zim.plugins.versioncontrol.hg">zim.plugins.versioncontrol.hg module</a></li>
<li class="toctree-l4"><a class="reference internal" href="zim.plugins.versioncontrol.html#module-zim.plugins.versioncontrol">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.arithmetic">zim.plugins.arithmetic module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.backlinkpane">zim.plugins.backlinkpane module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.bookmarksbar">zim.plugins.bookmarksbar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.diagrameditor">zim.plugins.diagrameditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.distractionfree">zim.plugins.distractionfree module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.ditaaeditor">zim.plugins.ditaaeditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.equationeditor">zim.plugins.equationeditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.gnu_r_ploteditor">zim.plugins.gnu_r_ploteditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.gnuplot_ploteditor">zim.plugins.gnuplot_ploteditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.inlinecalculator">zim.plugins.inlinecalculator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.insertsymbol">zim.plugins.insertsymbol module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.journal">zim.plugins.journal module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.linesorter">zim.plugins.linesorter module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.linkmap">zim.plugins.linkmap module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.osx_menubar">zim.plugins.osx_menubar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.pathbar">zim.plugins.pathbar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.printtobrowser">zim.plugins.printtobrowser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.quicknote">zim.plugins.quicknote module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.scoreeditor">zim.plugins.scoreeditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.screenshot">zim.plugins.screenshot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.sequencediagrameditor">zim.plugins.sequencediagrameditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.sourceview">zim.plugins.sourceview module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.spell">zim.plugins.spell module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.tableeditor">zim.plugins.tableeditor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.tableofcontents">zim.plugins.tableofcontents module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.tags">zim.plugins.tags module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.toolbar">zim.plugins.toolbar module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins.trayicon">zim.plugins.trayicon module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#zim-plugins-zeitgeist-logger-module">zim.plugins.zeitgeist-logger module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.plugins.html#module-zim.plugins">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zim.templates.html">zim.templates package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#module-zim.templates.expression">zim.templates.expression module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#module-zim.templates.expressionparser">zim.templates.expressionparser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#module-zim.templates.functions">zim.templates.functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#module-zim.templates.parser">zim.templates.parser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#module-zim.templates.processor">zim.templates.processor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="zim.templates.html#module-zim.templates">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-zim.actions">
<span id="zim-actions-module"></span><h2>zim.actions module<a class="headerlink" href="#module-zim.actions" title="Permalink to this headline">¶</a></h2>
<p>Action interface classes.</p>
<p>Objects can have “actions”, which are basically attributes of the
class <code class="xref py py-class docutils literal notranslate"><span class="pre">Action</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">ToggleAction</span></code>. These objects are callable as bound
methods. So actions are kind of special methods that define some
interface parameters, like what icon and label to use in the menu.</p>
<p>Use the <a class="reference internal" href="#zim.actions.action" title="zim.actions.action"><code class="xref py py-class docutils literal notranslate"><span class="pre">action</span></code></a> and <a class="reference internal" href="#zim.actions.toggle_action" title="zim.actions.toggle_action"><code class="xref py py-class docutils literal notranslate"><span class="pre">toggle_action</span></code></a> decorators to create actions.</p>
<p>The classes defined here can cooperate with <code class="docutils literal notranslate"><span class="pre">Gio.Action</span></code> to tie into the
Gtk action framework. Also they can use Gtk widgets like <code class="docutils literal notranslate"><span class="pre">Gtk.Button</span></code> as
a “proxy” to trigger the action and reflect the state.</p>
<p>## Menuhints</p>
<p>The “menuhints” attribute for actions sets one or more hints of where the action
should be in the menu and the behavior of the action. Multiple hints can
be separated with “:” in the string. The first one determines the menu, other
can modify the behavior.</p>
<p>Known values include:</p>
<blockquote>
<div><ul class="simple">
<li><p>notebook – notebook section in “File” menu</p></li>
<li><p>page – page section in “File” menu</p></li>
<li><p>edit – “Edit” menu - modifies page, insensitive for read-only page</p></li>
<li><p>insert – “Insert” menu &amp; editor actionbar - modifies page, insensitive for read-only page</p></li>
<li><p>view – “View” menu</p></li>
<li><p>tools – “Tools” menu - also shown in toolbar plugin if an icon is provided and tool and not the “headerbar” hint</p></li>
<li><p>go – “Go” menu</p></li>
<li><p>accelonly – do not show in menu, shortcut key only</p></li>
<li><p>headerbar – place action in the headerbar of the window, will place “view”
menu items on the right, others on the left</p></li>
<li><p>toolbar – used by toolbar plugin</p></li>
</ul>
</div></blockquote>
<p>Other values are ignored silently</p>
<blockquote>
<div><p>TODO: find right place in the documentation for this and update list</p>
</div></blockquote>
<dl class="py class">
<dt id="zim.actions.ActionClassMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">ActionClassMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">label</span></em>, <em class="sig-param"><span class="n">icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb_icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">accelerator</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">alt_accelerator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">menuhints</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">tooltip</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ActionClassMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.actions.ActionDescriptor" title="zim.actions.ActionDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.actions.ActionDescriptor</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="zim.actions.ActionDescriptor">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">ActionDescriptor</code><a class="headerlink" href="#zim.actions.ActionDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="zim.actions.ActionMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">ActionMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em>, <em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ActionMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.actions.BoundActionMethod" title="zim.actions.BoundActionMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.actions.BoundActionMethod</span></code></a></p>
<dl class="py method">
<dt id="zim.actions.ActionMethod.connect_button">
<code class="sig-name descname">connect_button</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">button</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ActionMethod.connect_button" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.ActionMethod.create_button">
<code class="sig-name descname">create_button</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ActionMethod.create_button" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.ActionMethod.create_icon_button">
<code class="sig-name descname">create_icon_button</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fallback_icon</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ActionMethod.create_icon_button" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.ActionMethod.create_tool_button">
<code class="sig-name descname">create_tool_button</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fallback_icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">connect_button</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ActionMethod.create_tool_button" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.actions.BoundActionMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">BoundActionMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em>, <em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.BoundActionMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="zim.actions.BoundActionMethod.get_gaction">
<code class="sig-name descname">get_gaction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.BoundActionMethod.get_gaction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.BoundActionMethod.get_sensitive">
<code class="sig-name descname">get_sensitive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.BoundActionMethod.get_sensitive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.BoundActionMethod.set_sensitive">
<code class="sig-name descname">set_sensitive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sensitive</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.BoundActionMethod.set_sensitive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.actions.RadioActionClassMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">RadioActionClassMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">menulabel</span></em>, <em class="sig-param"><span class="n">radio_options</span></em>, <em class="sig-param"><span class="n">menuhints</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.RadioActionClassMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.actions.ActionDescriptor" title="zim.actions.ActionDescriptor"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.actions.ActionDescriptor</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="zim.actions.RadioActionMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">RadioActionMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em>, <em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.RadioActionMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.actions.BoundActionMethod" title="zim.actions.BoundActionMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.actions.BoundActionMethod</span></code></a></p>
<dl class="py method">
<dt id="zim.actions.RadioActionMethod.get_gaction">
<code class="sig-name descname">get_gaction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.RadioActionMethod.get_gaction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.RadioActionMethod.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.RadioActionMethod.get_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.RadioActionMethod.set_state">
<code class="sig-name descname">set_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.RadioActionMethod.set_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.actions.ToggleActionClassMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">ToggleActionClassMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">label</span></em>, <em class="sig-param"><span class="n">icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb_icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">accelerator</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">init</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">menuhints</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">tooltip</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionClassMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.actions.ActionClassMethod" title="zim.actions.ActionClassMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.actions.ActionClassMethod</span></code></a></p>
<p>Toggle action, used by the <a class="reference internal" href="#zim.actions.toggle_action" title="zim.actions.toggle_action"><code class="xref py py-class docutils literal notranslate"><span class="pre">toggle_action</span></code></a> decorator</p>
</dd></dl>

<dl class="py class">
<dt id="zim.actions.ToggleActionMethod">
<em class="property">class </em><code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">ToggleActionMethod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em>, <em class="sig-param"><span class="n">action</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.actions.ActionMethod" title="zim.actions.ActionMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.actions.ActionMethod</span></code></a></p>
<dl class="py method">
<dt id="zim.actions.ToggleActionMethod.connect_button">
<code class="sig-name descname">connect_button</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">button</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionMethod.connect_button" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect a <code class="docutils literal notranslate"><span class="pre">Gtk.ToggleAction</span></code> or <code class="docutils literal notranslate"><span class="pre">Gtk.ToggleButton</span></code> to this action</p>
</dd></dl>

<dl class="py method">
<dt id="zim.actions.ToggleActionMethod.create_tool_button">
<code class="sig-name descname">create_tool_button</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fallback_icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">connect_button</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionMethod.create_tool_button" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.ToggleActionMethod.get_active">
<code class="sig-name descname">get_active</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionMethod.get_active" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.ToggleActionMethod.get_gaction">
<code class="sig-name descname">get_gaction</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionMethod.get_gaction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.actions.ToggleActionMethod.set_active">
<code class="sig-name descname">set_active</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">active</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.ToggleActionMethod.set_active" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the state of the action without triggering the action</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.actions.action">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">action</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label</span></em>, <em class="sig-param"><span class="n">accelerator</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb_icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">menuhints</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">alt_accelerator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tooltip</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.action" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to turn a method into an <a class="reference internal" href="#zim.actions.ActionMethod" title="zim.actions.ActionMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActionMethod</span></code></a> object
Methods decorated with this decorator can have keyword arguments
but no positional arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> – the label used e.g for the menu item (can use “_” for mnemonics)</p></li>
<li><p><strong>accelerator</strong> – accelerator key description</p></li>
<li><p><strong>icon</strong> – name of a “noun” icon - used together with the label. Only use
this for “things and places”, not for actions or commands, and only if the
icon makes the item easier to recognize.</p></li>
<li><p><strong>verb_icon</strong> – name of a “verb” icon - only used for compact menu views</p></li>
<li><p><strong>menuhints</strong> – string with hints for menu placement and sensitivity</p></li>
<li><p><strong>alt_accelerator</strong> – alternative accelerator key binding</p></li>
<li><p><strong>tooltip</strong> – tooltip label, defaults to <code class="docutils literal notranslate"><span class="pre">label</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.actions.get_actions">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">get_actions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.get_actions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns bound actions for object</p>
<p>NOTE: See also <a class="reference internal" href="zim.plugins.html#zim.plugins.list_actions" title="zim.plugins.list_actions"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.plugins.list_actions()</span></code></a> if you want to include actions
of plugin extensions</p>
</dd></dl>

<dl class="py function">
<dt id="zim.actions.get_gtk_actiongroup">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">get_gtk_actiongroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.get_gtk_actiongroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal notranslate"><span class="pre">Gtk.ActionGroup</span></code> for an object using <code class="xref py py-class docutils literal notranslate"><span class="pre">Action</span></code>
objects as attributes.</p>
<p>Defines the attribute <code class="docutils literal notranslate"><span class="pre">obj.actiongroup</span></code> if it does not yet exist.</p>
<p>This method can only be used when gtk is available</p>
</dd></dl>

<dl class="py function">
<dt id="zim.actions.gtk_radioaction_set_current">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">gtk_radioaction_set_current</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">g_radio_action</span></em>, <em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.gtk_radioaction_set_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.actions.hasaction">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">hasaction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">actionname</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.hasaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <code class="docutils literal notranslate"><span class="pre">hasattr</span></code> but for attributes that define an action</p>
</dd></dl>

<dl class="py function">
<dt id="zim.actions.initialize_actiongroup">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">initialize_actiongroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">prefix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.initialize_actiongroup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.actions.radio_action">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">radio_action</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menulabel</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">radio_options</span></em>, <em class="sig-param"><span class="n">menuhints</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.radio_action" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.actions.radio_option">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">radio_option</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">label</span></em>, <em class="sig-param"><span class="n">accelerator</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.radio_option" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.actions.toggle_action">
<code class="sig-prename descclassname">zim.actions.</code><code class="sig-name descname">toggle_action</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label</span></em>, <em class="sig-param"><span class="n">accelerator</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verb_icon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">init</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">menuhints</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">tooltip</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.actions.toggle_action" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to turn a method into an <a class="reference internal" href="#zim.actions.ToggleActionMethod" title="zim.actions.ToggleActionMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">ToggleActionMethod</span></code></a> object</p>
<p>The decorated method should be defined as:
<code class="docutils literal notranslate"><span class="pre">my_toggle_method(self,</span> <span class="pre">active)</span></code>. The ‘<code class="docutils literal notranslate"><span class="pre">active</span></code>’ parameter is a
boolean that reflects the new state of the toggle.</p>
<p>Users can also call the method without setting the <code class="docutils literal notranslate"><span class="pre">active</span></code>
parameter. In this case the wrapper determines how to toggle the
state and calls the inner function with the new state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> – the label used e.g for the menu item (can use “_” for mnemonics)</p></li>
<li><p><strong>accelerator</strong> – accelerator key description</p></li>
<li><p><strong>icon</strong> – name of a “noun” icon - used together with the label. Only use
this for “things and places”, not for actions or commands, and only if the
icon makes the item easier to recognize.</p></li>
<li><p><strong>verb_icon</strong> – name of a “verb” icon - only used for compact menu views</p></li>
<li><p><strong>init</strong> – initial state of the toggle</p></li>
<li><p><strong>menuhints</strong> – string with hints for menu placement and sensitivity</p></li>
<li><p><strong>tooltip</strong> – tooltip label, defaults to <code class="docutils literal notranslate"><span class="pre">label</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.applications">
<span id="zim-applications-module"></span><h2>zim.applications module<a class="headerlink" href="#module-zim.applications" title="Permalink to this headline">¶</a></h2>
<p>This module contains helper classes for running external applications.</p>
<p>See <a class="reference internal" href="zim.gui.html#module-zim.gui.applications" title="zim.gui.applications"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.gui.applications</span></code></a> for classes with desktop integration for
applications defined in desktop entry files.</p>
<dl class="py class">
<dt id="zim.applications.Application">
<em class="property">class </em><code class="sig-prename descclassname">zim.applications.</code><code class="sig-name descname">Application</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">tryexeccmd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for objects representing an external application or
command.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#zim.applications.Application.name" title="zim.applications.Application.name"><strong>name</strong></a> – the name of the command (default to first item of <code class="docutils literal notranslate"><span class="pre">cmd</span></code>)</p></li>
<li><p><a class="reference internal" href="zim.gui.html#zim.gui.applications.DesktopEntryDict.cmd" title="zim.gui.applications.DesktopEntryDict.cmd"><strong>cmd</strong></a> – the command and arguments as a tuple or a string
(when given as a string it will be parsed for quoted arguments)</p></li>
<li><p><a class="reference internal" href="zim.gui.html#zim.gui.applications.DesktopEntryDict.tryexeccmd" title="zim.gui.applications.DesktopEntryDict.tryexeccmd"><strong>tryexeccmd</strong></a> – the command to check in <a class="reference internal" href="#zim.applications.Application.tryexec" title="zim.applications.Application.tryexec"><code class="xref py py-class docutils literal notranslate"><span class="pre">tryexec()</span></code></a>, if <code class="docutils literal notranslate"><span class="pre">None</span></code>
fall back to first item of <code class="docutils literal notranslate"><span class="pre">cmd</span></code></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="zim.applications.Application.STATUS_OK">
<code class="sig-name descname">STATUS_OK</code><em class="property"> = 0</em><a class="headerlink" href="#zim.applications.Application.STATUS_OK" title="Permalink to this definition">¶</a></dt>
<dd><p>return code when the command executed successfullly</p>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.Application.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#zim.applications.Application.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.applications.Application.pipe">
<code class="sig-name descname">pipe</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">input</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.Application.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the application in a sub-process and capture the output.
Like <a class="reference internal" href="#zim.applications.Application.run" title="zim.applications.Application.run"><code class="xref py py-class docutils literal notranslate"><span class="pre">run()</span></code></a>, but connects to stdin and stdout for the sub-process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The data read is buffered in memory, so do not use this
method if the data size is large or unlimited.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – additional arguments to give to the command as tuple or list</p></li>
<li><p><strong>cwd</strong> – the folder to set as working directory for the command</p></li>
<li><p><strong>input</strong> – input for the command as string</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>output as a list of lines</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#zim.applications.ApplicationError" title="zim.applications.ApplicationError"><strong>ApplicationError</strong></a> – if the sub-process returned an error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.Application.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.Application.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the application in a sub-process and wait for it to finish.
Even when the application runs successfully, any message to stderr
is logged as a warning by zim.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – additional arguments to give to the command as tuple or list</p></li>
<li><p><strong>cwd</strong> – the folder to set as working directory for the command</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#zim.applications.ApplicationError" title="zim.applications.ApplicationError"><strong>ApplicationError</strong></a> – if the sub-process returned an error.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.Application.spawn">
<code class="sig-name descname">spawn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">callback</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cwd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.Application.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the application in the background and return immediately.
This is used to start an external in parallel with zim that is
not expected to exit immediatly, so we do not want to wait for
it - e.g. a webbrowser to show an URL that was clicked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – additional arguments to give to the command as tuple or list</p></li>
<li><p><strong>callback</strong> – <p>optional callback can be used to trigger when
the application exits. The signature is:</p>
<p>callback(status, data)</p>
</p></li>
</ul>
</dd>
</dl>
<p>where ‘<code class="docutils literal notranslate"><span class="pre">status</span></code>’ is the exit status of the process. The
application object provides a constant ‘<code class="docutils literal notranslate"><span class="pre">STATUS_OK</span></code>’ which can
be used to test if the application was successful or not.
:param data: additional data for the callback
:param cwd: the folder to set as working directory for the command
:returns: the PID for the new process</p>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.Application.tryexec">
<code class="sig-name descname">tryexec</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.Application.tryexec" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the executable exists without calling it. This
method is used e.g. to decide what applications to show in the
gui. Uses the <code class="docutils literal notranslate"><span class="pre">tryexeccmd</span></code>, or the first item of <code class="docutils literal notranslate"><span class="pre">cmd</span></code> as the
executable name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the executable was found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.applications.ApplicationError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.applications.</code><code class="sig-name descname">ApplicationError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">retcode</span></em>, <em class="sig-param"><span class="n">stderr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.ApplicationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
<p>Error raises for error in sub process errors</p>
<dl class="py attribute">
<dt id="zim.applications.ApplicationError.description">
<code class="sig-name descname">description</code><em class="property"> = None</em><a class="headerlink" href="#zim.applications.ApplicationError.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.applications.StartFile">
<em class="property">class </em><code class="sig-prename descclassname">zim.applications.</code><code class="sig-name descname">StartFile</code><a class="headerlink" href="#zim.applications.StartFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.applications.Application" title="zim.applications.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.applications.Application</span></code></a></p>
<p>Application wrapper for <code class="docutils literal notranslate"><span class="pre">os.startfile()</span></code>. Can be used on
windows to open files and URLs with the default application.</p>
<dl class="py attribute">
<dt id="zim.applications.StartFile.key">
<code class="sig-name descname">key</code><em class="property"> = 'startfile'</em><a class="headerlink" href="#zim.applications.StartFile.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.applications.StartFile.name">
<code class="sig-name descname">name</code><em class="property"> = 'Default (os)'</em><a class="headerlink" href="#zim.applications.StartFile.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.applications.StartFile.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.StartFile.run" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is not supported by this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – always</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.StartFile.spawn">
<code class="sig-name descname">spawn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">callback</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.StartFile.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the application in the background and return immediately.
This is used to start an external in parallel with zim that is
not expected to exit immediatly, so we do not want to wait for
it - e.g. a webbrowser to show an URL that was clicked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – additional arguments to give to the command as tuple or list</p></li>
<li><p><strong>callback</strong> – <p>optional callback can be used to trigger when
the application exits. The signature is:</p>
<p>callback(status, data)</p>
</p></li>
</ul>
</dd>
</dl>
<p>where ‘<code class="docutils literal notranslate"><span class="pre">status</span></code>’ is the exit status of the process. The
application object provides a constant ‘<code class="docutils literal notranslate"><span class="pre">STATUS_OK</span></code>’ which can
be used to test if the application was successful or not.
:param data: additional data for the callback
:param cwd: the folder to set as working directory for the command
:returns: the PID for the new process</p>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.StartFile.tryexec">
<code class="sig-name descname">tryexec</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.StartFile.tryexec" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the executable exists without calling it. This
method is used e.g. to decide what applications to show in the
gui. Uses the <code class="docutils literal notranslate"><span class="pre">tryexeccmd</span></code>, or the first item of <code class="docutils literal notranslate"><span class="pre">cmd</span></code> as the
executable name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the executable was found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.applications.WebBrowser">
<em class="property">class </em><code class="sig-prename descclassname">zim.applications.</code><code class="sig-name descname">WebBrowser</code><a class="headerlink" href="#zim.applications.WebBrowser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.applications.Application" title="zim.applications.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.applications.Application</span></code></a></p>
<p>Application wrapper for the <code class="docutils literal notranslate"><span class="pre">webbrowser</span></code> module. Can be used as
fallback if no webbrowser is configured.</p>
<dl class="py attribute">
<dt id="zim.applications.WebBrowser.key">
<code class="sig-name descname">key</code><em class="property"> = 'webbrowser'</em><a class="headerlink" href="#zim.applications.WebBrowser.key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.applications.WebBrowser.name">
<code class="sig-name descname">name</code><em class="property"> = 'Default (webbrowser)'</em><a class="headerlink" href="#zim.applications.WebBrowser.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.applications.WebBrowser.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.WebBrowser.run" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is not supported by this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – always</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.WebBrowser.spawn">
<code class="sig-name descname">spawn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">callback</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.WebBrowser.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the application in the background and return immediately.
This is used to start an external in parallel with zim that is
not expected to exit immediatly, so we do not want to wait for
it - e.g. a webbrowser to show an URL that was clicked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – additional arguments to give to the command as tuple or list</p></li>
<li><p><strong>callback</strong> – <p>optional callback can be used to trigger when
the application exits. The signature is:</p>
<p>callback(status, data)</p>
</p></li>
</ul>
</dd>
</dl>
<p>where ‘<code class="docutils literal notranslate"><span class="pre">status</span></code>’ is the exit status of the process. The
application object provides a constant ‘<code class="docutils literal notranslate"><span class="pre">STATUS_OK</span></code>’ which can
be used to test if the application was successful or not.
:param data: additional data for the callback
:param cwd: the folder to set as working directory for the command
:returns: the PID for the new process</p>
</dd></dl>

<dl class="py method">
<dt id="zim.applications.WebBrowser.tryexec">
<code class="sig-name descname">tryexec</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.applications.WebBrowser.tryexec" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the executable exists without calling it. This
method is used e.g. to decide what applications to show in the
gui. Uses the <code class="docutils literal notranslate"><span class="pre">tryexeccmd</span></code>, or the first item of <code class="docutils literal notranslate"><span class="pre">cmd</span></code> as the
executable name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the executable was found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-zim.datetimetz">
<span id="zim-datetimetz-module"></span><h2>zim.datetimetz module<a class="headerlink" href="#module-zim.datetimetz" title="Permalink to this headline">¶</a></h2>
<p>Thin wrapper for ‘datetime’ module from the standard library.
Provides timezone info for the local time. Based on example code
from standard library datetime documentation.</p>
<p>Main usage of this module is the function <a class="reference internal" href="#zim.datetimetz.now" title="zim.datetimetz.now"><code class="xref py py-class docutils literal notranslate"><span class="pre">now()</span></code></a>. It imports all
from the standard datetime, so it can be used as a transparant
replacement.</p>
<p>Also adds a <a class="reference internal" href="#zim.datetimetz.strfcal" title="zim.datetimetz.strfcal"><code class="xref py py-class docutils literal notranslate"><span class="pre">strfcal()</span></code></a> method and extends <a class="reference internal" href="#zim.datetimetz.strftime" title="zim.datetimetz.strftime"><code class="xref py py-class docutils literal notranslate"><span class="pre">strftime()</span></code></a> to deal
with weeknumbers correctly.</p>
<dl class="py class">
<dt id="zim.datetimetz.LocalTimezone">
<em class="property">class </em><code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">LocalTimezone</code><a class="headerlink" href="#zim.datetimetz.LocalTimezone" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.tzinfo</span></code></p>
<p>Implementation of tzinfo with the current time zone, based on
the platform’s idea of local time</p>
<dl class="py method">
<dt id="zim.datetimetz.LocalTimezone.dst">
<code class="sig-name descname">dst</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.LocalTimezone.dst" title="Permalink to this definition">¶</a></dt>
<dd><p>datetime -&gt; DST offset as timedelta positive east of UTC.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.datetimetz.LocalTimezone.tzname">
<code class="sig-name descname">tzname</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.LocalTimezone.tzname" title="Permalink to this definition">¶</a></dt>
<dd><p>datetime -&gt; string name of time zone.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.datetimetz.LocalTimezone.utcoffset">
<code class="sig-name descname">utcoffset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.LocalTimezone.utcoffset" title="Permalink to this definition">¶</a></dt>
<dd><p>datetime -&gt; timedelta showing offset from UTC, negative values indicating West of UTC</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.datetimetz.dates_for_week">
<code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">dates_for_week</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">year</span></em>, <em class="sig-param"><span class="n">week</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.dates_for_week" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first and last day of the week for a given
week number of a given year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> – year as int (e.g. 2012)</p></li>
<li><p><strong>week</strong> – week number as int (0 .. 53)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a 2-tuple of:
- a <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> object for the start date of the week
- a <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> object for the end dateof the week</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>first day of the week can be either <code class="docutils literal notranslate"><span class="pre">MONDAY</span></code> or <code class="docutils literal notranslate"><span class="pre">SUNDAY</span></code>,
this is configured in <code class="docutils literal notranslate"><span class="pre">FIRST_DAY_OF_WEEK</span></code> based on the locale.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="zim.datetimetz.init_first_day_of_week">
<code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">init_first_day_of_week</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.init_first_day_of_week" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.datetimetz.now">
<code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">now</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.now" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <code class="docutils literal notranslate"><span class="pre">datetime.now()</span></code> but with local timezone info</p>
</dd></dl>

<dl class="py function">
<dt id="zim.datetimetz.strfcal">
<code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">strfcal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.strfcal" title="Permalink to this definition">¶</a></dt>
<dd><p>Method similar to strftime, but dealing with the weeknumber,
day of the week and the year of that week.</p>
<p>Week 1 is the first week where the Thursday is in the new year. So e.g. the
last day of 2012 is a Monday. And therefore the calendar week for 31 Dec 2012
is already week 1 2013.</p>
<p>The locale decides whether a week starts on Monday (as the ISO standard would have
it) or on Sunday. So depending on your locale Sun 6 Jan 2013 is either still week
1 or already the first day of week 2.</p>
<p>Codes supported by this method:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%w</span></code> is replaced by the weekday as a decimal number [1,7], with 1 representing
either Monday or Sunday depending on the locale</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%W</span></code> is replaced by the weeknumber depending on the locale</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%Y</span></code> is replaced by the year with century as a decimal number, the year depends
on the weeknumber depending on the locale</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%%</span></code> is replaced by %</p></li>
</ul>
</div></blockquote>
<p>Difference between this method and strftime is that:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>It uses locale to determine the first day of the week</p></li>
<li><p>It returns the year that goes with the weeknumber</p></li>
</ol>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="zim.datetimetz.strftime">
<code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">strftime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.strftime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.datetimetz.weekcalendar">
<code class="sig-prename descclassname">zim.datetimetz.</code><code class="sig-name descname">weekcalendar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.datetimetz.weekcalendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the year, week number and week day for a specific date.
Like <code class="docutils literal notranslate"><span class="pre">datetime.date.isocalendar()</span></code> but takes into account
<code class="docutils literal notranslate"><span class="pre">FIRST_DAY_OF_WEEK</span></code> correctly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – a <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> or <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a year, a week number and a weekday as integers
The weekday numbering depends on locale, 1 is always first day
of the week, either a Sunday or a Monday.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.errors">
<span id="zim-errors-module"></span><h2>zim.errors module<a class="headerlink" href="#module-zim.errors" title="Permalink to this headline">¶</a></h2>
<p>This module contains the base class for all errors in zim</p>
<dl class="py exception">
<dt id="zim.errors.Error">
<em class="property">exception </em><code class="sig-prename descclassname">zim.errors.</code><code class="sig-name descname">Error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.errors.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Base class for all errors in zim.</p>
<p>This class is intended for application and usage errors, these will
be caught in the user interface and presented as error dialogs.
In contrast and Exception that does <code class="docutils literal notranslate"><span class="pre">not</span></code> derive from this base
class will result in a “You found a bug” dialog. Do not use this
class e.g. to catch programming errors.</p>
<p>Subclasses should define two attributes. The first is ‘msg’, which is
the short description of the error. Typically this gives the specific
input / page / … which caused the error. In there should be an attribute
‘description’ (either as class attribute or object attribute) with a verbose
description. This description can be less specific but should explain
the error in a user friendly way. The default behavior is to take ‘msg’ as
the single argument for the constructor. So a minimal subclass only needs
to define a class attribute ‘description’.</p>
<p>For a typical error dialog in the Gtk interface the short string from ‘msg’
will be shown as the title in bold letters while the longer ‘description’
is shown below it in normal letters. As a guideline error classes that are
used in the gui or that can be e.g. be raised on invalid input from the
user should be translated.</p>
<dl class="py attribute">
<dt id="zim.errors.Error.description">
<code class="sig-name descname">description</code><em class="property"> = ''</em><a class="headerlink" href="#zim.errors.Error.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.errors.Error.msg">
<code class="sig-name descname">msg</code><em class="property"> = '&lt;Unknown Error&gt;'</em><a class="headerlink" href="#zim.errors.Error.msg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.errors.exception_handler">
<code class="sig-prename descclassname">zim.errors.</code><code class="sig-name descname">exception_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">debug</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.errors.exception_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <code class="docutils literal notranslate"><span class="pre">show_error()</span></code> but with debug message instead of the actual
error. Intended to be used in <code class="docutils literal notranslate"><span class="pre">except</span></code> blocks as a catch-all for
both intended and unintended errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>debug</strong> – debug message for logging</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.errors.get_error_msg">
<code class="sig-prename descclassname">zim.errors.</code><code class="sig-name descname">get_error_msg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.errors.get_error_msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the message to show for an error</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>error</strong> – error object or string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-tuple of: message string and a boolean
whether a traceback should be shown or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.errors.log_error">
<code class="sig-prename descclassname">zim.errors.</code><code class="sig-name descname">log_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.errors.log_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Log error and traceback</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>error</strong> – error as understood by <a class="reference internal" href="#zim.errors.get_error_msg" title="zim.errors.get_error_msg"><code class="xref py py-class docutils literal notranslate"><span class="pre">get_error_msg()</span></code></a></p></li>
<li><p><strong>debug</strong> – optional debug message, defaults to the error itself</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.errors.set_use_gtk">
<code class="sig-prename descclassname">zim.errors.</code><code class="sig-name descname">set_use_gtk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">use_gtk</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.errors.set_use_gtk" title="Permalink to this definition">¶</a></dt>
<dd><p>Set whether or not <a class="reference internal" href="#zim.errors.show_error" title="zim.errors.show_error"><code class="xref py py-class docutils literal notranslate"><span class="pre">show_error</span></code></a> and <a class="reference internal" href="#zim.errors.exception_handler" title="zim.errors.exception_handler"><code class="xref py py-class docutils literal notranslate"><span class="pre">exception_handler</span></code></a>
shold use the <code class="xref py py-class docutils literal notranslate"><span class="pre">ErrorDialog</span></code> or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>use_gtk</strong> – set <code class="docutils literal notranslate"><span class="pre">True</span></code> for interactive gui, <code class="docutils literal notranslate"><span class="pre">False</span></code> for
terminal mode</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.errors.show_error">
<code class="sig-prename descclassname">zim.errors.</code><code class="sig-name descname">show_error</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">error</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.errors.show_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Show an error by calling <a class="reference internal" href="#zim.errors.log_error" title="zim.errors.log_error"><code class="xref py py-class docutils literal notranslate"><span class="pre">log_error()</span></code></a> and when running
interactive also calling <code class="xref py py-class docutils literal notranslate"><span class="pre">ErrorDialog</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>error</strong> – the error object</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.fs">
<span id="zim-fs-module"></span><h2>zim.fs module<a class="headerlink" href="#module-zim.fs" title="Permalink to this headline">¶</a></h2>
<p>Module with basic filesystem objects.</p>
<p>This module must be used by all other zim modules for filesystem
interaction. It takes care of proper encoding file paths
(system dependent) and file contents (UTF-8) and implements a number
of sanity checks.</p>
<p>The main classes are <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> and <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> which implement file and
folder objects. There is also a singleton object to represent the whole
filesystem, whichprovides signals when a file or folder is created,
moved or deleted. This is stored in <a class="reference internal" href="#zim.fs.FS" title="zim.fs.FS"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.FS</span></code></a>.</p>
<dl class="py class">
<dt id="zim.fs.Dir">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">Dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.fs.UnixPath" title="zim.fs.UnixPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.UnixPath</span></code></a></p>
<p>Class representing a single file system folder</p>
<dl class="py method">
<dt id="zim.fs.Dir.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this foldder and any empty parent folders. If the
folder does not exist, still check for empty parent folders.
Fails silently if the folder is not empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when successfull (so <code class="docutils literal notranslate"><span class="pre">False</span></code> means it still exists).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.copyto">
<code class="sig-name descname">copyto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dest</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.copyto" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively copy the contents of this folder.
When the destination folder already exists the contents will be
merged, so you need to check existence of the destination first
if you want a clean new copy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dest</strong> – a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file or folder exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file or folder exists</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub classes in order
that they enforce the type of the resource as well</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.file">
<code class="sig-name descname">file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object for a path below this folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a (relative) file path as string, tuple or
<a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object. When <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object already
this method still enforces it is below this folder.
So this method can be used as check as well.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#zim.fs.PathLookupError" title="zim.fs.PathLookupError"><strong>PathLookupError</strong></a> – if the path is not below this folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.get_file_tree_as_text">
<code class="sig-name descname">get_file_tree_as_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">raw</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.get_file_tree_as_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an overview of files and folders below this dir
as text. Used in tests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>raw</strong> – see <a class="reference internal" href="#zim.fs.Dir.list" title="zim.fs.Dir.list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list()</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>file listing as string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.list">
<code class="sig-name descname">list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">glob</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">includehidden</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">includetmp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">raw</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.list" title="Permalink to this definition">¶</a></dt>
<dd><p>List the file contents</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>glob</strong> – a file name glob to filter the listed files, e.g <code class="docutils literal notranslate"><span class="pre">&quot;*.png&quot;</span></code></p></li>
<li><p><strong>includehidden</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> include hidden files
(e.g. names starting with “.”), ignore otherwise</p></li>
<li><p><strong>includetmp</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> include temporary files
(e.g. names ending in “~”), ignore otherwise</p></li>
<li><p><strong>raw</strong> – for filtered folders (<code class="docutils literal notranslate"><span class="pre">FilteredDir</span></code> instances)
setting <code class="docutils literal notranslate"><span class="pre">raw</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will disable filtering</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a sorted list of names for files and subdirectories.
Will not return names that could not be decoded properly and
will throw warnings if those are encountered.
Hidden files are silently ignored.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.new_file">
<code class="sig-name descname">new_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.new_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object for a new file below this folder.
Like <a class="reference internal" href="#zim.fs.Dir.file" title="zim.fs.Dir.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file()</span></code></a> but guarantees the file does not yet exist by
adding sequential numbers if needed. So the resulting file
may have a modified name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a (relative) file path as string, tuple or
<a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#zim.fs.PathLookupError" title="zim.fs.PathLookupError"><strong>PathLookupError</strong></a> – if the path is not below this folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.new_subdir">
<code class="sig-name descname">new_subdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.new_subdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for a new sub-folder below this folder.
Like <a class="reference internal" href="#zim.fs.Dir.subdir" title="zim.fs.Dir.subdir"><code class="xref py py-class docutils literal notranslate"><span class="pre">subdir()</span></code></a> but guarantees the folder does not yet exist by
adding sequential numbers if needed. So the resulting folder
may have a modified name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a (relative) file path as string, tuple or
<a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#zim.fs.PathLookupError" title="zim.fs.PathLookupError"><strong>PathLookupError</strong></a> – if the path is not below this folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.remove">
<code class="sig-name descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this folder, fails if it is not empty.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.remove_children">
<code class="sig-name descname">remove_children</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.remove_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively remove everything below this folder .</p>
<p><strong>WARNING:</strong> This is quite powerful and can do a lot of damage
when executed for the wrong folder, so pleae make sure to double
check the dir is actually what you think it is before calling this.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.resolve_dir">
<code class="sig-name descname">resolve_dir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.resolve_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for a path relative to this folder</p>
<p>Like <a class="reference internal" href="#zim.fs.Dir.subdir" title="zim.fs.Dir.subdir"><code class="xref py py-class docutils literal notranslate"><span class="pre">subdir()</span></code></a> but allows the path to start with “../” as
well, so can handle any relative path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a (relative) file path as string, tuple or
<a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.resolve_file">
<code class="sig-name descname">resolve_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.resolve_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object for a path relative to this folder</p>
<p>Like <a class="reference internal" href="#zim.fs.Dir.file" title="zim.fs.Dir.file"><code class="xref py py-class docutils literal notranslate"><span class="pre">file()</span></code></a> but allows the path to start with “../” as
well, so can handle any relative path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a (relative) file path as string, tuple or
<a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.subdir">
<code class="sig-name descname">subdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.subdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for a path below this folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a (relative) file path as string, tuple or
<a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object. When <code class="docutils literal notranslate"><span class="pre">path</span></code> is a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object already
this method still enforces it is below this folder.
So this method can be used as check as well.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#zim.fs.PathLookupError" title="zim.fs.PathLookupError"><strong>PathLookupError</strong></a> – if the path is not below this folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.touch">
<code class="sig-name descname">touch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this folder and any parent folders that do not yet
exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> – creation mode (e.g. 0700)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.Dir.walk">
<code class="sig-name descname">walk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">raw</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.Dir.walk" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator that yields all files and folders below this dir
as objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>raw</strong> – see <a class="reference internal" href="#zim.fs.Dir.list" title="zim.fs.Dir.list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list()</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>yields <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> and <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> objects, depth first</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt id="zim.fs.FS">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FS</code><em class="property"> = &lt;zim.fs.FSSingletonClass object&gt;</em><a class="headerlink" href="#zim.fs.FS" title="Permalink to this definition">¶</a></dt>
<dd><p>Singleton object for the system filesystem - see <a class="reference internal" href="#zim.fs.FSSingletonClass" title="zim.fs.FSSingletonClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">FSSingletonClass</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="zim.fs.FSObjectMonitor">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FSObjectMonitor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FSObjectMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.SignalEmitter</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="zim.fs.FSSingletonClass">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FSSingletonClass</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FSSingletonClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.SignalEmitter</span></code></a></p>
<p>Class used for the singleton ‘zim.fs.FS’ instance</p>
<dl class="field-list simple">
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">path-created</span> <span class="pre">(:class:`FilePath`)</span></code>: Emitted when a new file or
folder has been created</p>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">path-moved</span> <span class="pre">(:class:`FilePath`,</span> <span class="pre">:class:`FilePath`)</span></code>: Emitted when
a file or folder has been moved</p>
</dd>
<dt class="field-odd">Signal</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">path-deleted</span> <span class="pre">(:class:`FilePath`)</span></code>: Emitted when a file or
folder has been deleted</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>fix the FS signals for folders as well</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="zim.fs.File">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">File</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">checkoverwrite</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">endofline</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.fs.UnixPath" title="zim.fs.UnixPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.UnixPath</span></code></a></p>
<p>Class representing a single file.</p>
<p>This class implements much more complex logic than the default
python file objects. E.g. on writing we first write to a temporary
files, then flush and sync and finally replace the file we intended
to write with the temporary file. This makes it much more difficult
to loose file contents when something goes wrong during the writing.</p>
<p>Also it implements logic to check the modification time before
writing to prevent overwriting a file that was changed on disk in
between read and write operations. If this mtime check fails MD5
sums are used to verify before raising an exception (because some
share drives do not maintain mtime very precisely).
This logic is not atomic, so your mileage may vary.</p>
<dl class="py method">
<dt id="zim.fs.File.check_has_changed_on_disk">
<code class="sig-name descname">check_has_changed_on_disk</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.check_has_changed_on_disk" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> when this file has changed on disk</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this file and cleanup any empty parent folder.
Convenience method calling <a class="reference internal" href="#zim.fs.File.remove" title="zim.fs.File.remove"><code class="xref py py-class docutils literal notranslate"><span class="pre">File.remove()</span></code></a> and <a class="reference internal" href="#zim.fs.Dir.cleanup" title="zim.fs.Dir.cleanup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir.cleanup()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.compare">
<code class="sig-name descname">compare</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if file contents are the same. This differs from
<code class="xref py py-class docutils literal notranslate"><span class="pre">isequal()</span></code> because files can be different physical locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – another <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the files have the same content</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.copyto">
<code class="sig-name descname">copyto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dest</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.copyto" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy this file to another location. Preserves all file
attributes (by using <code class="docutils literal notranslate"><span class="pre">shutil.copy2()</span></code>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dest</strong> – a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> or <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for the destination. If the
destination is a folder, we will copy to a file below that
folder of the same name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file or folder exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file or folder exists</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub classes in order
that they enforce the type of the resource as well</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.get_endofline">
<code class="sig-name descname">get_endofline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.get_endofline" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the end-of-line character(s) used for writing this file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the end-of-line character(s)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.get_mimetype">
<code class="sig-name descname">get_mimetype</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.get_mimetype" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mime-type for this file.
Will use the XDG mimetype system if available, otherwise
fallsback to the standard library <code class="docutils literal notranslate"><span class="pre">mimetypes</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the mimetype as a string, e.g. “text/plain”</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.isimage">
<code class="sig-name descname">isimage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.isimage" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if this is an image file. Convenience method that
works even when no real mime-type suport is available.
If this method returns <code class="docutils literal notranslate"><span class="pre">True</span></code> it is no guarantee
this image type is actually supported by Gtk.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when this is an image file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.raw">
<code class="sig-name descname">raw</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the raw content without UTF-8 decoding, newline logic,
etc. Used to read binary data, e.g. when serving files over www.
Note that this function also does not integrates with checking
mtime, so intended for read only usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>file content as string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the file contents as a string. Takes case of decoding
UTF-8 and fixes line endings.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the content as (unicode) string.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#zim.fs.FileNotFoundError" title="zim.fs.FileNotFoundError"><strong>FileNotFoundError</strong></a> – when the file does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.readlines">
<code class="sig-name descname">readlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.readlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the file contents as a list of lines. Takes case of
decoding UTF-8 and fixes line endings.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the content as a list of lines.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#zim.fs.FileNotFoundError" title="zim.fs.FileNotFoundError"><strong>FileNotFoundError</strong></a> – when the file does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.remove">
<code class="sig-name descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove (delete) this file and cleanup any related temporary
files we created. This action can not be un-done.
Ignores silently if the file did not exist in the first place.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.touch">
<code class="sig-name descname">touch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Create this file and any parent folders if it does not yet
exist. (Parent folders are also created when writing to a file,
so you only need to call this method in special cases - e.g.
when an external program requires the file to exist.)</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write file contents from string. This overwrites the current
content. Will automatically create all parent folders.
If writing fails the file will either have the new content or the
old content, but it should not be possible to have the content
truncated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – <p>new content as (unicode) string</p>
<dl class="field-list simple">
<dt class="field-odd">emits</dt>
<dd class="field-odd"><p>path-created if the file did not yet exist</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.File.writelines">
<code class="sig-name descname">writelines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lines</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.File.writelines" title="Permalink to this definition">¶</a></dt>
<dd><p>Write file contents from a list of lines.
Like <a class="reference internal" href="#zim.fs.File.write" title="zim.fs.File.write"><code class="xref py py-class docutils literal notranslate"><span class="pre">write()</span></code></a> but input is a list instead of a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lines</strong> – <p>new content as list of lines</p>
<dl class="field-list simple">
<dt class="field-odd">emits</dt>
<dd class="field-odd"><p>path-created if the file did not yet exist</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.fs.FileNotFoundError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FileNotFoundError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FileNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.fs.PathLookupError" title="zim.fs.PathLookupError"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.PathLookupError</span></code></a></p>
<p>Error raised when a file does not exist that is expected to
exist.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>reconcile this class with the NoSuchFileError in zim.gui</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="zim.fs.FilePath">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FilePath</code><a class="headerlink" href="#zim.fs.FilePath" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#zim.fs.UnixPath" title="zim.fs.UnixPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.UnixPath</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt id="zim.fs.FileUnicodeError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FileUnicodeError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">error</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FileUnicodeError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
<p>Error raised when there is an issue decoding the file contents.
Typically due to different encoding where UTF-8 is expected.</p>
</dd></dl>

<dl class="py exception">
<dt id="zim.fs.FileWriteError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FileWriteError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FileWriteError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
<p>Error raised when we can not write a file. Either due to file
permissions or e.g. because it is detected the file changed on
disk.</p>
</dd></dl>

<dl class="py class">
<dt id="zim.fs.FilteredDir">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">FilteredDir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FilteredDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.Dir</span></code></a></p>
<p>Class implementing a folder with a filtered listing. Can be
used to e.g. filter all objects that are also ignored by version
control.</p>
<dl class="py method">
<dt id="zim.fs.FilteredDir.filter">
<code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FilteredDir.filter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.fs.FilteredDir.ignore">
<code class="sig-name descname">ignore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">glob</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FilteredDir.ignore" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a file pattern to ignore</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>glob</strong> – a file path pattern (e.g. “<a href="#id3"><span class="problematic" id="id4">*</span></a>.txt”)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.FilteredDir.list">
<code class="sig-name descname">list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">includehidden</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">includetmp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">raw</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.FilteredDir.list" title="Permalink to this definition">¶</a></dt>
<dd><p>List the file contents</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>glob</strong> – a file name glob to filter the listed files, e.g <code class="docutils literal notranslate"><span class="pre">&quot;*.png&quot;</span></code></p></li>
<li><p><strong>includehidden</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> include hidden files
(e.g. names starting with “.”), ignore otherwise</p></li>
<li><p><strong>includetmp</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> include temporary files
(e.g. names ending in “~”), ignore otherwise</p></li>
<li><p><strong>raw</strong> – for filtered folders (<code class="docutils literal notranslate"><span class="pre">FilteredDir</span></code> instances)
setting <code class="docutils literal notranslate"><span class="pre">raw</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> will disable filtering</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a sorted list of names for files and subdirectories.
Will not return names that could not be decoded properly and
will throw warnings if those are encountered.
Hidden files are silently ignored.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py data">
<dt id="zim.fs.IMAGE_EXTENSIONS">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">IMAGE_EXTENSIONS</code><em class="property"> = ('bmp', 'gif', 'icns', 'ico', 'cur', 'jp2', 'jpc', 'jpx', 'j2k', 'jpf', 'jpeg', 'jpe', 'jpg', 'pcx', 'png', 'pnm', 'pbm', 'pgm', 'ppm', 'ras', 'tga', 'targa', 'tiff', 'tif', 'wbmp', 'xbm', 'xpm', 'wmf', 'apm', 'svg', 'svgz', 'svg.gz', 'webp')</em><a class="headerlink" href="#zim.fs.IMAGE_EXTENSIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Extensions to determine image mimetypes - used in <a class="reference internal" href="#zim.fs.File.isimage" title="zim.fs.File.isimage"><code class="xref py py-class docutils literal notranslate"><span class="pre">File.isimage()</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt id="zim.fs.PathLookupError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">PathLookupError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.PathLookupError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
<p>Error raised when there is an error finding the specified path</p>
</dd></dl>

<dl class="py class">
<dt id="zim.fs.TmpFile">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">TmpFile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">basename</span></em>, <em class="sig-param"><span class="n">unique</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">persistent</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.TmpFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.File</span></code></a></p>
<p>Class for temporary files. These are stored in the temp directory
and by default they are deleted again when the object is destructed.</p>
</dd></dl>

<dl class="py class">
<dt id="zim.fs.UnixPath">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">UnixPath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for Dir and File objects, represents a file path</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="zim.newfs.html#zim.newfs.base.FSObjectBase.path" title="zim.newfs.base.FSObjectBase.path"><strong>path</strong></a> – the absolute file path as string
file system encoding (should only be used by low-level functions)</p></li>
<li><p><a class="reference internal" href="#zim.fs.UnixPath.user_path" title="zim.fs.UnixPath.user_path"><strong>user_path</strong></a> – the absolute file path relative to the user’s
<code class="docutils literal notranslate"><span class="pre">HOME</span></code> folder or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><a class="reference internal" href="#zim.fs.UnixPath.uri" title="zim.fs.UnixPath.uri"><strong>uri</strong></a> – the <code class="docutils literal notranslate"><span class="pre">file://</span></code> URI for this path</p></li>
<li><p><a class="reference internal" href="#zim.fs.UnixPath.basename" title="zim.fs.UnixPath.basename"><strong>basename</strong></a> – the basename of the path</p></li>
<li><p><a class="reference internal" href="#zim.fs.UnixPath.dirname" title="zim.fs.UnixPath.dirname"><strong>dirname</strong></a> – the dirname of the path</p></li>
<li><p><a class="reference internal" href="#zim.fs.UnixPath.dir" title="zim.fs.UnixPath.dir"><strong>dir</strong></a> – <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for the parent folder</p></li>
</ul>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">changed</span> <span class="pre">(file,</span> <span class="pre">other_file,</span> <span class="pre">event_type)</span></code>: emitted when file
changed - availability based on <code class="docutils literal notranslate"><span class="pre">gio</span></code> support for file monitors on
this platform</p>
</dd>
</dl>
<dl class="py method">
<dt id="zim.fs.UnixPath.basename">
<em class="property">property </em><code class="sig-name descname">basename</code><a class="headerlink" href="#zim.fs.UnixPath.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>Basename property</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.commonparent">
<code class="sig-name descname">commonparent</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.commonparent" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a comon parent folder between two file paths.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – another <a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for the common parent folder, or
<code class="docutils literal notranslate"><span class="pre">None</span></code> when there is no common parent</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.ctime">
<code class="sig-name descname">ctime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.ctime" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the creation time of the file path.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the mtime timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.dir">
<em class="property">property </em><code class="sig-name descname">dir</code><a class="headerlink" href="#zim.fs.UnixPath.dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for the parent dir</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.dirname">
<em class="property">property </em><code class="sig-name descname">dirname</code><a class="headerlink" href="#zim.fs.UnixPath.dirname" title="Permalink to this definition">¶</a></dt>
<dd><p>Dirname property</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.exists">
<code class="sig-name descname">exists</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file or folder exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file or folder exists</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub classes in order
that they enforce the type of the resource as well</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.ischild">
<code class="sig-name descname">ischild</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.ischild" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if this path is a child path of a folder</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if this path is a child path of <code class="docutils literal notranslate"><span class="pre">parent</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.isdir">
<code class="sig-name descname">isdir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.isdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if this path is a folder or not. Used to detect if
e.g. a <a class="reference internal" href="#zim.fs.File" title="zim.fs.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object should have really been a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when this path is a folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.isequal">
<code class="sig-name descname">isequal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.isequal" title="Permalink to this definition">¶</a></dt>
<dd><p>Check file paths are equal based on stat results (inode
number etc.). Intended to detect when two files or dirs are the
same on case-insensitive filesystems. Does not explicitly check
the content is the same.
If you just want to know if two files have the same content,
see <a class="reference internal" href="#zim.fs.File.compare" title="zim.fs.File.compare"><code class="xref py py-class docutils literal notranslate"><span class="pre">File.compare()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – an other <a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the two paths are one and the same file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.iswritable">
<code class="sig-name descname">iswritable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.iswritable" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file or folder is writable. Uses permissions of
parent folder if the file or folder does not (yet) exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file or folder is writable</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.monitor">
<code class="sig-name descname">monitor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <a class="reference internal" href="#zim.fs.FSObjectMonitor" title="zim.fs.FSObjectMonitor"><code class="xref py py-class docutils literal notranslate"><span class="pre">FSObjectMonitor</span></code></a> for this path</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.mtime">
<code class="sig-name descname">mtime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.mtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the modification time of the file path.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the mtime timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.new_from_zim_config">
<em class="property">classmethod </em><code class="sig-name descname">new_from_zim_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.new_from_zim_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new object based on the string representation for
that path</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.relpath">
<code class="sig-name descname">relpath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reference</span></em>, <em class="sig-param"><span class="n">allowupward</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.relpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a relative path for this file path with respect to
another path. This method always returns paths using “/” as
separator, even on windows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reference</strong> – a reference <a class="reference internal" href="#zim.fs.FilePath" title="zim.fs.FilePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePath</span></code></a></p></li>
<li><p><strong>allowupward</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> the relative path is allowed to
start with ‘<code class="docutils literal notranslate"><span class="pre">../</span></code>’, if <code class="docutils literal notranslate"><span class="pre">False</span></code> the reference should be a
parent folder of this path.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a relative file path</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>AssertionError</strong> – when <code class="docutils literal notranslate"><span class="pre">allowupward</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> and
<code class="docutils literal notranslate"><span class="pre">reference</span></code> is not a parent folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.rename">
<code class="sig-name descname">rename</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">newpath</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename (move) the content this file or folder to another
location. This will <strong>not</strong> change the current file path, so the
object keeps pointing to the old location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>newpath</strong> – <p>the destination <code class="docutils literal notranslate"><span class="pre">FilePath</span></code> which can either be a
file or a folder.</p>
<dl class="field-list simple">
<dt class="field-odd">emits</dt>
<dd class="field-odd"><p>path-moved</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.serialize_zim_config">
<code class="sig-name descname">serialize_zim_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.serialize_zim_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the file path as string for serializing the object</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.size">
<code class="sig-name descname">size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get file size in bytes
See <a class="reference internal" href="#zim.fs.format_file_size" title="zim.fs.format_file_size"><code class="xref py py-class docutils literal notranslate"><span class="pre">format_file_size()</span></code></a> to get a human readable label</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>file size in bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.split">
<code class="sig-name descname">split</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.UnixPath.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the parts of the path on the path separator.
If the OS uses the concept of a drive the first part will
include the drive. (So using split() to count the number of
path elements will not be robust for the path “/”.)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of path elements</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.uri">
<em class="property">property </em><code class="sig-name descname">uri</code><a class="headerlink" href="#zim.fs.UnixPath.uri" title="Permalink to this definition">¶</a></dt>
<dd><p>File uri property</p>
</dd></dl>

<dl class="py method">
<dt id="zim.fs.UnixPath.user_path">
<em class="property">property </em><code class="sig-name descname">user_path</code><a class="headerlink" href="#zim.fs.UnixPath.user_path" title="Permalink to this definition">¶</a></dt>
<dd><p>User_path property</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.fs.WindowsPath">
<em class="property">class </em><code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">WindowsPath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.WindowsPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.fs.UnixPath" title="zim.fs.UnixPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs.UnixPath</span></code></a></p>
<p>Base class for Dir and File objects, represents a file path
on windows.</p>
<dl class="py method">
<dt id="zim.fs.WindowsPath.uri">
<em class="property">property </em><code class="sig-name descname">uri</code><a class="headerlink" href="#zim.fs.WindowsPath.uri" title="Permalink to this definition">¶</a></dt>
<dd><p>File uri property with win32 logic</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.fs.adapt_from_newfs">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">adapt_from_newfs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.adapt_from_newfs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.fs.cleanup_filename">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">cleanup_filename</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.cleanup_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all characters in ‘name’ that are not allowed as part
of a file name. This function is intended for e.g. config files etc.
<strong>not</strong> for page files in a store.
For file system filenames we can not use:
‘', ‘/’, ‘:’, ‘*’, ‘?’, ‘”’, ‘&lt;’, ‘&gt;’, ‘|’
And we also exclude “t” and “n”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – the filename as string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the name with invalid characters removed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.fs.format_file_size">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">format_file_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bytes</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.format_file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a human readable label  for a file size
E.g. <code class="docutils literal notranslate"><span class="pre">1230</span></code> becomes <code class="docutils literal notranslate"><span class="pre">&quot;1.23kb&quot;</span></code>, idem for “Mb” and “Gb”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bytes</strong> – file size in bytes as integer</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>size as string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.fs.get_tmpdir">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">get_tmpdir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.get_tmpdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a folder in the system temp dir for usage by zim.
This zim specific temp folder has permission set to be readable
only by the current users, and is touched if it didn’t exist yet.
Used as base folder by <a class="reference internal" href="#zim.fs.TmpFile" title="zim.fs.TmpFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">TmpFile</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#zim.fs.Dir" title="zim.fs.Dir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dir</span></code></a> object for the zim specific tmp folder</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.fs.is_hidden_file">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">is_hidden_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.is_hidden_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.fs.isabs">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">isabs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.isabs" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="docutils literal notranslate"><span class="pre">os.path.isabs</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a file system path as string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when the path is absolute instead of a relative path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.fs.lrmdir">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">lrmdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.lrmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="docutils literal notranslate"><span class="pre">os.rmdir</span></code> that also knows how to unlink symlinks.
Fails when the folder is not a link and is not empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a file system path as string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.fs.normalize_file_uris">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">normalize_file_uris</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.normalize_file_uris" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to deal with invalid or non-local file URIs.
Translates <code class="docutils literal notranslate"><span class="pre">file:/</span></code> to the proper <code class="docutils literal notranslate"><span class="pre">file:///</span></code> form and replaces
URIs of the form <code class="docutils literal notranslate"><span class="pre">file://host/share</span></code> to <code class="docutils literal notranslate"><span class="pre">smb://host/share</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a filesystem path or URL</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the proper URI or the original input path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.fs.normalize_win32_share">
<code class="sig-prename descclassname">zim.fs.</code><code class="sig-name descname">normalize_win32_share</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.fs.normalize_win32_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Translates paths for windows shares in the platform specific
form. So on windows it translates <code class="docutils literal notranslate"><span class="pre">smb://</span></code> URLs to <code class="docutils literal notranslate"><span class="pre">\host\share</span></code>
form, and vice versa on all other platforms.
Just returns the original path if it was already in the right form,
or when it is not a path for a share drive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a filesystem path or URL</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the platform specific path or the original input path</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.history">
<span id="zim-history-module"></span><h2>zim.history module<a class="headerlink" href="#module-zim.history" title="Permalink to this headline">¶</a></h2>
<p>This module implements the history for navigating pages in the
notebook.</p>
<p>The main class is <a class="reference internal" href="#zim.history.History" title="zim.history.History"><code class="xref py py-class docutils literal notranslate"><span class="pre">History</span></code></a>. Also there is a specialized class
<a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> which extends <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> with history information.</p>
<dl class="py class">
<dt id="zim.history.History">
<em class="property">class </em><code class="sig-prename descclassname">zim.history.</code><code class="sig-name descname">History</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.signals.SignalEmitter</span></code></a></p>
<p>History class, keeps track of a list of <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> objects.
Also has a ‘current’ page which should match the current page in the
interface. The current page normally is the latest page in the list,
but when the user navigates back in the history it can be another
position.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="zim.export.html#zim.export.selections.PageSelection.notebook" title="zim.export.selections.PageSelection.notebook"><strong>notebook</strong></a> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code></p></li>
<li><p><strong>uistate</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigDict</span></code> used to store the history</p></li>
</ul>
</dd>
<dt class="field-even">Signal</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">changed</span> <span class="pre">()</span></code>: emitted when the path list changed</p>
</dd>
</dl>
<dl class="py method">
<dt id="zim.history.History.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append a new page to the history. Will drop the forward
stack and make this page the latest page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – <p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> for the current page</p>
<dl class="field-list simple">
<dt class="field-odd">emits</dt>
<dd class="field-odd"><p>changed</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_child">
<code class="sig-name descname">get_child</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the most recent path that is a direct child of the
given path. If there is a recent grand-child of the given path
in the history, that will be used as a bases to get a new
<code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object. Used by the keybinding for navigating to child
pages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_current">
<code class="sig-name descname">get_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current path</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_grandchild">
<code class="sig-name descname">get_grandchild</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_grandchild" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the deepest nested grand-child of a given path. Used
for the ‘namespace’ pathbar to keep showing child pages when
the user navigates up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> object or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_history">
<code class="sig-name descname">get_history</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator function that yields history records, latest first</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>yields <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_next">
<code class="sig-name descname">get_next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next path</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if current is
already the last path in the list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_previous">
<code class="sig-name descname">get_previous</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_previous" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the previous path</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if current is
already the first path in the list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_recent">
<code class="sig-name descname">get_recent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_recent" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator function that yields recent pages</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>yields <a class="reference internal" href="#zim.history.RecentPath" title="zim.history.RecentPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">RecentPath</span></code></a> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks through the history and recent pages to the last
known cursor position for a page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a tuple of cursor and scroll position for <code class="docutils literal notranslate"><span class="pre">path</span></code>
or <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">None)</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.set_current">
<code class="sig-name descname">set_current</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.set_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Set current path (changes the pointer, does not change
the list of pages)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – a <a class="reference internal" href="#zim.history.HistoryPath" title="zim.history.HistoryPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">HistoryPath</span></code></a> object</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – when the path is not in the history list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.history.History.set_state">
<code class="sig-name descname">set_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">cursor</span></em>, <em class="sig-param"><span class="n">scroll</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.History.set_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks through the history and recent pages to set the last
known cursor position for a page.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object</p></li>
<li><p><strong>cursor</strong> – cursor position</p></li>
<li><p><strong>scroll</strong> – scroll position</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.history.HistoryList">
<em class="property">class </em><code class="sig-prename descclassname">zim.history.</code><code class="sig-name descname">HistoryList</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.HistoryList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<p>A list of :class:<a href="#id5"><span class="problematic" id="id6">`</span></a>HistoryPath`s which takes care of serialization
when saving in a config file, and de-serialization on construction.</p>
<dl class="py method">
<dt id="zim.history.HistoryList.index">
<code class="sig-name descname">index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.HistoryList.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Return first index of value.</p>
<p>Raises ValueError if the value is not present.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.history.HistoryList.serialize_zim_config">
<code class="sig-name descname">serialize_zim_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.HistoryList.serialize_zim_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize to string</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the list content as a json formatted string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.history.HistoryPath">
<em class="property">class </em><code class="sig-prename descclassname">zim.history.</code><code class="sig-name descname">HistoryPath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">cursor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scroll</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.HistoryPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.notebook.html#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.page.Path</span></code></a></p>
<p>Path with some additional info from the history.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#zim.history.HistoryPath.cursor" title="zim.history.HistoryPath.cursor"><strong>cursor</strong></a> – cursor position as integer offset from start of the
text buffer</p></li>
<li><p><a class="reference internal" href="#zim.history.HistoryPath.scroll" title="zim.history.HistoryPath.scroll"><strong>scroll</strong></a> – scroll position of the text view as integer</p></li>
<li><p><a class="reference internal" href="#zim.history.HistoryPath.is_first" title="zim.history.HistoryPath.is_first"><strong>is_first</strong></a> – <code class="docutils literal notranslate"><span class="pre">True</span></code> when this is the first path in the history</p></li>
<li><p><a class="reference internal" href="#zim.history.HistoryPath.is_last" title="zim.history.HistoryPath.is_last"><strong>is_last</strong></a> – <code class="docutils literal notranslate"><span class="pre">True</span></code> when this is the last path in the history</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="zim.history.HistoryPath.cursor">
<code class="sig-name descname">cursor</code><a class="headerlink" href="#zim.history.HistoryPath.cursor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.history.HistoryPath.is_first">
<code class="sig-name descname">is_first</code><a class="headerlink" href="#zim.history.HistoryPath.is_first" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.history.HistoryPath.is_last">
<code class="sig-name descname">is_last</code><a class="headerlink" href="#zim.history.HistoryPath.is_last" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.history.HistoryPath.scroll">
<code class="sig-name descname">scroll</code><a class="headerlink" href="#zim.history.HistoryPath.scroll" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.history.RecentPath">
<em class="property">class </em><code class="sig-prename descclassname">zim.history.</code><code class="sig-name descname">RecentPath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.history.RecentPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.notebook.html#zim.notebook.page.Path" title="zim.notebook.page.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook.page.Path</span></code></a></p>
<dl class="py attribute">
<dt id="zim.history.RecentPath.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#zim.history.RecentPath.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-zim.import_files">
<span id="zim-import-files-module"></span><h2>zim.import_files module<a class="headerlink" href="#module-zim.import_files" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="zim.import_files.import_file">
<code class="sig-prename descclassname">zim.import_files.</code><code class="sig-name descname">import_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">format</span><span class="o">=</span><span class="default_value">'wiki'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.import_files.import_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a file into a zim notebook page</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object to import from</p></li>
<li><p><strong>notebook</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object to import into</p></li>
<li><p><strong>path</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> to import to within the notebook</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object for the imported page, this may be a different
page than the one <code class="docutils literal notranslate"><span class="pre">path</span></code> is pointing - see <code class="xref py py-class docutils literal notranslate"><span class="pre">notebook.get_new_page()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.import_files.import_folder">
<code class="sig-prename descclassname">zim.import_files.</code><code class="sig-name descname">import_folder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">folder</span></em>, <em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">filter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">format</span><span class="o">=</span><span class="default_value">'wiki'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.import_files.import_folder" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a folder recursively</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Folder</span></code> object to import from</p></li>
<li><p><strong>notebook</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object to import into</p></li>
<li><p><strong>path</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> to import to within the notebook</p></li>
<li><p><strong>filter</strong> – optional filter function to decide which files and folder
to import when scanning <code class="docutils literal notranslate"><span class="pre">folder</span></code>. Will be given each file or folder found
when scanning <code class="docutils literal notranslate"><span class="pre">folder</span></code> and expected to return boolean whether to import
yes or no.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.insertedobjects">
<span id="zim-insertedobjects-module"></span><h2>zim.insertedobjects module<a class="headerlink" href="#module-zim.insertedobjects" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="zim.insertedobjects.InsertedObjectType">
<em class="property">class </em><code class="sig-prename descclassname">zim.insertedobjects.</code><code class="sig-name descname">InsertedObjectType</code><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class for defining “objects” that can be inserted in a wiki page</p>
<p>This class is called “InsertedObjectType” instead of “InsertedObject”
because it does <em>not</em> represent a single inserted object, but defines a
type of object of which many instances can occur. The instances themselves
are represented by a series of tokens for the parser and a model plus a
widget for the user interface.</p>
<p>Note: if you are looking for how to define a new object type from a plugin,
please see <code class="xref py py-class docutils literal notranslate"><span class="pre">InsertedObjectTypeExtension</span></code> in <a class="reference internal" href="zim.plugins.html#module-zim.plugins" title="zim.plugins"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.plugins</span></code></a>. Base classes
for widgets can be found in <a class="reference internal" href="zim.gui.html#module-zim.gui.insertedobjects" title="zim.gui.insertedobjects"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.gui.insertedobjects</span></code></a>.</p>
<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.create_widget">
<code class="sig-name descname">create_widget</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.create_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Gtk widget for the given model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> – an object created with <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.model_from_data" title="zim.insertedobjects.InsertedObjectType.model_from_data"><code class="xref py py-class docutils literal notranslate"><span class="pre">model_from_data()</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a Gtk widget object derived from <code class="xref py py-class docutils literal notranslate"><span class="pre">InsertedObjectWidget</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.data_from_model">
<code class="sig-name descname">data_from_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.data_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the object data for a model object
This method is used to serialize the model object back into a form that
can be handled when parsing wiki content.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> – an object created with <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.model_from_data" title="zim.insertedobjects.InsertedObjectType.model_from_data"><code class="xref py py-class docutils literal notranslate"><span class="pre">model_from_data()</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a 2-tuple <code class="docutils literal notranslate"><span class="pre">(attrib,</span> <span class="pre">data)</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.format">
<code class="sig-name descname">format</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">dumper</span></em>, <em class="sig-param"><span class="n">attrib</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the object using a specific output format
Intended to improve rendering of the object on exporting.</p>
<p>This method should always be robust for missing attributes and body
contents. The <code class="docutils literal notranslate"><span class="pre">attrib</span></code> will automatically be checked by <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.parse_attrib" title="zim.insertedobjects.InsertedObjectType.parse_attrib"><code class="xref py py-class docutils literal notranslate"><span class="pre">parse_attrib</span></code></a>
before being given to this method.</p>
<p>Implementing this method is optional, default checks for a specific
method per format (e.g. <code class="docutils literal notranslate"><span class="pre">format_html()</span></code> for the “html” format) and
raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if no such method is defined.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format</strong> – name of the output format</p></li>
<li><p><strong>dumper</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">Dumper</span></code> object</p></li>
<li><p><strong>attrib</strong> – dict with object attributes</p></li>
<li><p><strong>data</strong> – string with object content</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of strings</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if no specific formatting for “format” is available</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zim.insertedobjects.InsertedObjectType.label">
<code class="sig-name descname">label</code><em class="property"> = None</em><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.label" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.model_from_data">
<code class="sig-name descname">model_from_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">page</span></em>, <em class="sig-param"><span class="n">attrib</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.model_from_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a model for the object</p>
<p>The main purpose for the model is that it is shared between widgets that
show the same object. See e.g. <code class="docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code> or <code class="docutils literal notranslate"><span class="pre">Gtk.TreeModel</span></code>
for examples.</p>
<p>No API is expected of the model object other than that it can be used as
argument for <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.create_widget" title="zim.insertedobjects.InsertedObjectType.create_widget"><code class="xref py py-class docutils literal notranslate"><span class="pre">create_widget()</span></code></a> and <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.data_from_model" title="zim.insertedobjects.InsertedObjectType.data_from_model"><code class="xref py py-class docutils literal notranslate"><span class="pre">data_from_model()</span></code></a> and a
“changed” signal that should be emitted when the content has changed, so
the pageview knows that the page has changed and should be saved before
closing.</p>
<p>Since the model is specific for the page where the object occurs, any
user of the object type should serialize back to data before e.g.
copying the object to a different page.</p>
<p>This method should always be robust for missing attributes and body
contents. The <code class="docutils literal notranslate"><span class="pre">attrib</span></code> will automatically be checked by <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.parse_attrib" title="zim.insertedobjects.InsertedObjectType.parse_attrib"><code class="xref py py-class docutils literal notranslate"><span class="pre">parse_attrib</span></code></a>
before being given to this method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>notebook</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object</p></li>
<li><p><strong>page</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object for the page where this object occurs</p></li>
<li><p><strong>attrib</strong> – dict with object attributes</p></li>
<li><p><strong>data</strong> – string with object content</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a model object</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zim.insertedobjects.InsertedObjectType.name">
<code class="sig-name descname">name</code><em class="property"> = None</em><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.new_model_interactive">
<code class="sig-name descname">new_model_interactive</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em>, <em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">page</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.new_model_interactive" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new object model interactively
Interactive means that we can use e.g. a dialog to prompt for input.
The default behavior is to use <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.new_object" title="zim.insertedobjects.InsertedObjectType.new_object"><code class="xref py py-class docutils literal notranslate"><span class="pre">new_object()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> – Gtk widget to use as parent widget for dialogs</p></li>
<li><p><strong>notebook</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Notebook</span></code> object</p></li>
<li><p><strong>page</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object for the page where this object occurs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a model object (see <a class="reference internal" href="#zim.insertedobjects.InsertedObjectType.model_from_data" title="zim.insertedobjects.InsertedObjectType.model_from_data"><code class="xref py py-class docutils literal notranslate"><span class="pre">model_from_data()</span></code></a>)</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError: if user cancelled the action</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.new_object">
<code class="sig-name descname">new_object</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.new_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new empty object</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a 2-tuple <code class="docutils literal notranslate"><span class="pre">(attrib,</span> <span class="pre">data)</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zim.insertedobjects.InsertedObjectType.object_attr">
<code class="sig-name descname">object_attr</code><em class="property"> = {}</em><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.object_attr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.insertedobjects.InsertedObjectType.parse_attrib">
<code class="sig-name descname">parse_attrib</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attrib</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.parse_attrib" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to enforce the supported attributes and their
types.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigDict</span></code> using the <code class="docutils literal notranslate"><span class="pre">object_attr</span></code> dict as definition</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zim.insertedobjects.InsertedObjectType.verb_icon">
<code class="sig-name descname">verb_icon</code><em class="property"> = None</em><a class="headerlink" href="#zim.insertedobjects.InsertedObjectType.verb_icon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-zim.parser">
<span id="zim-parser-module"></span><h2>zim.parser module<a class="headerlink" href="#module-zim.parser" title="Permalink to this headline">¶</a></h2>
<p>Generic parser for wiki formats</p>
<p>This parser for wiki text (and similar formats) consists of two classes:
the <a class="reference internal" href="#zim.parser.Rule" title="zim.parser.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class which defines objects which specify a single parser
rule, and the <a class="reference internal" href="#zim.parser.Parser" title="zim.parser.Parser"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code></a> class which takes a number of rules and
parses a piece of text accordingly. The parser just does a series of
regex matches and calls a method on the specific rule objects to
process the match. Recursion can be achieved by making the rules
process with another <a class="reference internal" href="#zim.parser.Parser" title="zim.parser.Parser"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code></a> object.</p>
<p>All rules have access to a <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> object which is used to construct
the resulting parse tree.</p>
<p>There are several limitation to this parser. Most importantly it does
not have backtracking, so once a rule matches it is not allowed to fail.
But since we are dealing with wiki input it is a good assumption that
the parser should always result in a representation of the text, even
if it is broken according to the grammar. So rules should be made
robust when implementing a wiki parser.</p>
<p>Another limitation comes from the fact that we use regular expressions.
There is a limit on the number of capturing groups you can have in a
single regex (100 on my system), and since all rules in a set are
compiled into one big expression this can become an issue for more
complex parser implementations. However for a typical wiki implementation
this should be sufficient.</p>
<p>Note that the regexes are compiles using the flags <code class="docutils literal notranslate"><span class="pre">re.U</span></code>, <code class="docutils literal notranslate"><span class="pre">re.M</span></code>,
and <code class="docutils literal notranslate"><span class="pre">re.X</span></code>. This means any whitespace in the expression is ignored,
and a literal space need to be written as “<a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id9"><span class="problematic" id="id10">``</span></a>”. In general you need
to use the “r” string prefix to ensure those backslashes make it
through to the final expression.</p>
<dl class="py class">
<dt id="zim.parser.Builder">
<em class="property">class </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">Builder</code><a class="headerlink" href="#zim.parser.Builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class defines a ‘builder’ interface for parse trees. It is
used by the parser to construct the parse tree while keeping the
parser objects agnostic of how the resulting parse tree objects
look.</p>
<dl class="py method">
<dt id="zim.parser.Builder.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">text</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Builder.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to open a tag, append text and close
it immediatly. Only used for formatted text that has no
sub-processing done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
<li><p><strong>text</strong> – formatted text</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>optional for subclasses, default implementation
calls <a class="reference internal" href="#zim.parser.Builder.start" title="zim.parser.Builder.start"><code class="xref py py-class docutils literal notranslate"><span class="pre">start()</span></code></a>, <a class="reference internal" href="#zim.parser.Builder.text" title="zim.parser.Builder.text"><code class="xref py py-class docutils literal notranslate"><span class="pre">text()</span></code></a>, and <a class="reference internal" href="#zim.parser.Builder.end" title="zim.parser.Builder.end"><code class="xref py py-class docutils literal notranslate"><span class="pre">end()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.Builder.end">
<code class="sig-name descname">end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Builder.end" title="Permalink to this definition">¶</a></dt>
<dd><p>End formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – the tag name</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>XXX</strong> – when tag does not match current state</p>
</dd>
<dt class="field-odd">Implementation</dt>
<dd class="field-odd"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.Builder.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Builder.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.Builder.text">
<code class="sig-name descname">text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Builder.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Append text</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – text to be appended as string</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.parser.BuilderTextBuffer">
<em class="property">class </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">BuilderTextBuffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.parser.Builder</span></code></a></p>
<p>Wrapper that buffers text going to a <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> object
such that the last piece of text remains accessible for inspection
and can be modified.</p>
<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">text</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to open a tag, append text and close
it immediatly. Only used for formatted text that has no
sub-processing done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
<li><p><strong>text</strong> – formatted text</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>optional for subclasses, default implementation
calls <a class="reference internal" href="#zim.parser.BuilderTextBuffer.start" title="zim.parser.BuilderTextBuffer.start"><code class="xref py py-class docutils literal notranslate"><span class="pre">start()</span></code></a>, <a class="reference internal" href="#zim.parser.BuilderTextBuffer.text" title="zim.parser.BuilderTextBuffer.text"><code class="xref py py-class docutils literal notranslate"><span class="pre">text()</span></code></a>, and <a class="reference internal" href="#zim.parser.BuilderTextBuffer.end" title="zim.parser.BuilderTextBuffer.end"><code class="xref py py-class docutils literal notranslate"><span class="pre">end()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.clear_text">
<code class="sig-name descname">clear_text</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.clear_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.end">
<code class="sig-name descname">end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.end" title="Permalink to this definition">¶</a></dt>
<dd><p>End formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – the tag name</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>XXX</strong> – when tag does not match current state</p>
</dd>
<dt class="field-odd">Implementation</dt>
<dd class="field-odd"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.flush">
<code class="sig-name descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.flush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.get_text">
<code class="sig-name descname">get_text</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.get_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.set_text">
<code class="sig-name descname">set_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.set_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.BuilderTextBuffer.text">
<code class="sig-name descname">text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.BuilderTextBuffer.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Append text</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – text to be appended as string</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.parser.Parser">
<em class="property">class </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">Parser</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">rules</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parser class that matches multiple rules at once. It will
compile the patterns of various rules into a single regex and
based on the match call the correct rules for processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#zim.parser.Parser.rules" title="zim.parser.Parser.rules"><strong>rules</strong></a> – list with <a class="reference internal" href="#zim.parser.Rule" title="zim.parser.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects, can be modified until the
parser is used for the first time for parsing (the attribute
becomes a tuple afterwards)</p></li>
<li><p><strong>process_unmatched</strong> – function (or object) to process un-matched
text, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.
The function should take a <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> object as first argument,
followed by one or more parameters for matched groups in the
regular expression.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="zim.parser.Parser.backup_parser_offset">
<code class="sig-name descname">backup_parser_offset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Parser.backup_parser_offset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.Parser.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">builder</span></em>, <em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Parser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Each parser object is callable so it can be used as a
processing function in any other parser object. This method
parses the given text and calls the appropriate methods of the
<a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> object to construct the parse results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>builder</strong> – a <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> object</p></li>
<li><p><strong>text</strong> – to be parsed text as string</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zim.parser.Parser.rules">
<code class="sig-name descname">rules</code><a class="headerlink" href="#zim.parser.Parser.rules" title="Permalink to this definition">¶</a></dt>
<dd><p>sub rules</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.parser.ParserError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">ParserError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.ParserError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
<dl class="py method">
<dt id="zim.parser.ParserError.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#zim.parser.ParserError.description" title="Permalink to this definition">¶</a></dt>
<dd><p>str(object=’’) -&gt; str
str(bytes_or_buffer[, encoding[, errors]]) -&gt; str</p>
<p>Create a new string object from the given object. If encoding or
errors is specified, then the object must expose a data buffer
that will be decoded using the given encoding and error handler.
Otherwise, returns the result of object.__str__() (if defined)
or repr(object).
encoding defaults to sys.getdefaultencoding().
errors defaults to ‘strict’.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.parser.Rule">
<em class="property">class </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">Rule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">pattern</span></em>, <em class="sig-param"><span class="n">process</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">descent</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.Rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that defines a single parser rule. Typically used
to define a regex pattern for one specific wiki format string
and the processing to be done when this formatting is encountered
in the text.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#zim.parser.SimpleTreeElement.tag" title="zim.parser.SimpleTreeElement.tag"><strong>tag</strong></a> – <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> tag for result of this rule. Used by the
default process method.</p></li>
<li><p><strong>pattern</strong> – the regular expression for this parser as string</p></li>
<li><p><a class="reference internal" href="zim.templates.html#zim.templates.processor.TemplateProcessor.process" title="zim.templates.processor.TemplateProcessor.process"><strong>process</strong></a> – function (or object) to process matched text, or <code class="docutils literal notranslate"><span class="pre">None</span></code>
The function should take a <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">Builder</span></code></a> object as first argument,
followed by one or more parameters for matched groups in the
regular expression. If the regex pattern has no capturing groups
this function is called with the whole match.
The default function will use the <code class="docutils literal notranslate"><span class="pre">tag</span></code> and <code class="docutils literal notranslate"><span class="pre">descent</span></code>
attributes</p></li>
<li><p><strong>decent</strong> – optional function (or object) to recursively parse the
text matched by this rule. Called in the same way as <code class="docutils literal notranslate"><span class="pre">process</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="zim.parser.SimpleTreeBuilder">
<em class="property">class </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">SimpleTreeBuilder</code><span class="sig-paren">(</span><em class="sig-param">elementfactory=&lt;class 'zim.parser.SimpleTreeElement'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.parser.Builder</span></code></a></p>
<p>Builder class that builds a tree of :class:<a href="#id11"><span class="problematic" id="id12">`</span></a>SimpleTreeElement`s</p>
<dl class="py method">
<dt id="zim.parser.SimpleTreeBuilder.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">text</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeBuilder.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to open a tag, append text and close
it immediatly. Only used for formatted text that has no
sub-processing done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
<li><p><strong>text</strong> – formatted text</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>optional for subclasses, default implementation
calls <a class="reference internal" href="#zim.parser.SimpleTreeBuilder.start" title="zim.parser.SimpleTreeBuilder.start"><code class="xref py py-class docutils literal notranslate"><span class="pre">start()</span></code></a>, <a class="reference internal" href="#zim.parser.SimpleTreeBuilder.text" title="zim.parser.SimpleTreeBuilder.text"><code class="xref py py-class docutils literal notranslate"><span class="pre">text()</span></code></a>, and <a class="reference internal" href="#zim.parser.SimpleTreeBuilder.end" title="zim.parser.SimpleTreeBuilder.end"><code class="xref py py-class docutils literal notranslate"><span class="pre">end()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.SimpleTreeBuilder.end">
<code class="sig-name descname">end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeBuilder.end" title="Permalink to this definition">¶</a></dt>
<dd><p>End formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – the tag name</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>XXX</strong> – when tag does not match current state</p>
</dd>
<dt class="field-odd">Implementation</dt>
<dd class="field-odd"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.SimpleTreeBuilder.get_root">
<code class="sig-name descname">get_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeBuilder.get_root" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.SimpleTreeBuilder.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeBuilder.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.parser.SimpleTreeBuilder.text">
<code class="sig-name descname">text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeBuilder.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Append text</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – text to be appended as string</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.parser.SimpleTreeElement">
<em class="property">class </em><code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">SimpleTreeElement</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">children</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<dl class="py attribute">
<dt id="zim.parser.SimpleTreeElement.attrib">
<code class="sig-name descname">attrib</code><a class="headerlink" href="#zim.parser.SimpleTreeElement.attrib" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.SimpleTreeElement.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attr</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeElement.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parser.SimpleTreeElement.pprint">
<code class="sig-name descname">pprint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.SimpleTreeElement.pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pretty-printed text representation</p>
</dd></dl>

<dl class="py attribute">
<dt id="zim.parser.SimpleTreeElement.tag">
<code class="sig-name descname">tag</code><a class="headerlink" href="#zim.parser.SimpleTreeElement.tag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.parser.convert_space_to_tab">
<code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">convert_space_to_tab</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">tabstop</span><span class="o">=</span><span class="default_value">4</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.convert_space_to_tab" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert spaces to tabs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> – the input text</p></li>
<li><p><strong>tabstop</strong> – the number of spaces to represent a tab</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the fixed text</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.parser.fix_line_end">
<code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">fix_line_end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.fix_line_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixes missing line end</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – the input text</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the fixed text</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.parser.get_line_count">
<code class="sig-prename descclassname">zim.parser.</code><code class="sig-name descname">get_line_count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parser.get_line_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function used to report line numbers for exceptions
that happen during parsing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> – the text being parsed</p></li>
<li><p><strong>offset</strong> – character offset in this text</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a 2-tuple of the line and column that corresponds to this
offset</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.parsing">
<span id="zim-parsing-module"></span><h2>zim.parsing module<a class="headerlink" href="#module-zim.parsing" title="Permalink to this headline">¶</a></h2>
<p>This module contains utilities for parsing strings and text</p>
<dl class="py class">
<dt id="zim.parsing.Re">
<em class="property">class </em><code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">Re</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em>, <em class="sig-param"><span class="n">flags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.Re" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper around regex pattern objects which memorizes the
last match object and gives list access to it’s capturing groups.
See module re for regex docs.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_re</span> <span class="o">=</span> <span class="n">Re</span><span class="p">(</span><span class="s1">&#39;^(\w[\w\+\-\.]+)\?(.*)&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">my_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">my_re</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">my_re</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="zim.parsing.Re.end">
<code class="sig-name descname">end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.Re.end" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the indices of the end of the substring matched by group;
group defaults to zero (meaning the whole matched substring). Return -1 if
group exists but did not contribute to the match. See re.matchobject for
details</p>
</dd></dl>

<dl class="py attribute">
<dt id="zim.parsing.Re.m">
<code class="sig-name descname">m</code><a class="headerlink" href="#zim.parsing.Re.m" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parsing.Re.match">
<code class="sig-name descname">match</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.Re.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as re.match()</p>
</dd></dl>

<dl class="py attribute">
<dt id="zim.parsing.Re.p">
<code class="sig-name descname">p</code><a class="headerlink" href="#zim.parsing.Re.p" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.parsing.Re.r">
<code class="sig-name descname">r</code><a class="headerlink" href="#zim.parsing.Re.r" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.parsing.Re.search">
<code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.Re.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as re.search()</p>
</dd></dl>

<dl class="py method">
<dt id="zim.parsing.Re.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.Re.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the indices of the start of the substring matched by group;
group defaults to zero (meaning the whole matched substring). Return -1 if
group exists but did not contribute to the match. See re.matchobject for
details</p>
</dd></dl>

<dl class="py method">
<dt id="zim.parsing.Re.sublist">
<code class="sig-name descname">sublist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">repl</span></em>, <em class="sig-param"><span class="n">list</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.Re.sublist" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is similar to “sub()” in that it substitutes regex
matches with the result of calling the argument “repl” with the
Re object as argument. The difference is that this function takes a
list as argument and executes the substitution for all strings in the
list while ignoring any non-string items. Also it does not substitute
the results in the string, but expands to a list where each part is
either a piece of the original string or the result of calling “repl”.
This method is useful to build a tokenizer. The method “repl” can
return token objects and the resulting list of strings and tokens can
be fed through this method several times for different regexes.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.parsing.TextBuffer">
<em class="property">class </em><code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">TextBuffer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span><span class="o">=</span><span class="default_value">()</span></em>, <em class="sig-param"><span class="o">/</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.TextBuffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<p>List of strings. Allows you to append arbitrary pieces of text but
calling get_lines() will recombine or split text into lines. Used by
parsers that need to output lines but handle smaller pieces of text
internally.</p>
<dl class="py method">
<dt id="zim.parsing.TextBuffer.get_lines">
<code class="sig-name descname">get_lines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">end_with_newline</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.TextBuffer.get_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a proper list of lines</p>
</dd></dl>

<dl class="py method">
<dt id="zim.parsing.TextBuffer.prefix_lines">
<code class="sig-name descname">prefix_lines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prefix</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.TextBuffer.prefix_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Prefix each line with string ‘prefix’.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.parsing.escape_string">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">escape_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">chars</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.escape_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Escape special characters with a backslash
Escapes newline, tab, backslash itself and any characters in <code class="docutils literal notranslate"><span class="pre">chars</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.link_type">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">link_type</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">link</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.link_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that returns a link type for urls and page links</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.parse_date">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">parse_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.parse_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of (year, month, day) for a date string or None
if failed to parse the string. Current supported formats:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dd?-mm?</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dd?-mm?-yy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dd?-mm?-yyyy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yyyy-mm?-dd?</span></code></p></li>
</ul>
</div></blockquote>
<p>Where ‘-‘ can be replaced by any separator. Any preceding or
trailing text will be ignored (so we can parse journal page names
correctly).</p>
<p>TODO: Some setting to prefer US dates with mm-dd instead of dd-mm
TODO: More date formats ?</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.split_escaped_string">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">split_escaped_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">char</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.split_escaped_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Split string on <code class="docutils literal notranslate"><span class="pre">char</span></code> while respecting backslash escapes</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.split_quoted_strings">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">split_quoted_strings</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">unescape</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">strict</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.split_quoted_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>Split a word list respecting quotes</p>
<p>This function always expect full words to be quoted, even if quotes
appear in the middle of a word, they are considered word
boundries.</p>
<p>( XDG Desktop Entry spec says full words must be quoted and
quotes in a word escaped, but doesn’t specifify what to do with
loose quotes in a string. )</p>
<p>Also a comma “,” is handled specially and is always considered a
word on it’s own.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – string to split in words</p></li>
<li><p><strong>unescape</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> quotes are removed, else they are
left in place</p></li>
<li><p><strong>strict</strong> – if <code class="docutils literal notranslate"><span class="pre">True</span></code> unmatched quotes will cause a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
to be raised, if <code class="docutils literal notranslate"><span class="pre">False</span></code> unmatched quotes are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.unescape_quoted_string">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">unescape_quoted_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.unescape_quoted_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes quotes from a string and unescapes embedded quotes</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.unescape_string">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">unescape_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.unescape_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Unescape backslash escapes in string
Recognizes <code class="docutils literal notranslate"><span class="pre">\n</span></code> and <code class="docutils literal notranslate"><span class="pre">\t</span></code> for newline and tab respectively,
otherwise keeps the literal character</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.uri_scheme">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">uri_scheme</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">link</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.uri_scheme" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that returns a scheme for URIs, URLs and email addresses</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.url_decode">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">url_decode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.url_decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace url-encoding hex sequences with their proper characters.</p>
<dl class="simple">
<dt>Mode can be:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">URL_ENCODE_DATA</span></code>: decode all chars</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">URL_ENCODE_PATH</span></code>: same as URL_ENCODE_DATA</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">URL_ENCODE_READABLE</span></code>: decode only whitespace and unicode characters</p></li>
</ul>
</dd>
</dl>
<p>The mode <code class="docutils literal notranslate"><span class="pre">URL_ENCODE_READABLE</span></code> will not decode any other characters,
so urls decoded with these modes can still contain escape sequences.
They are safe to use within zim, but should be re-encoded with
<code class="docutils literal notranslate"><span class="pre">URL_ENCODE_READABLE</span></code> before handing them to an external program.</p>
<p>This method will only decode non-ascii byte codes when the _whole_ byte
equivalent of the URL is in valid UTF-8 decoding. Else it is assumed the
encoding was done in another format and the decoding fails silently
for these byte sequences.</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.url_encode">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">url_encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.url_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces non-standard characters in urls with hex codes.</p>
<dl class="simple">
<dt>Mode can be:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">URL_ENCODE_DATA</span></code>: encode all un-safe chars</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">URL_ENCODE_PATH</span></code>: encode all un-safe chars except ‘/’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">URL_ENCODE_READABLE</span></code>: encode whitespace and all unicode characters</p></li>
</ul>
</dd>
</dl>
<p>The mode URL_ENCODE_READABLE can be applied to urls that are already
encoded because it does not touch the “%” character. The modes
URL_ENCODE_DATA and URL_ENCODE_PATH can only be applied to strings
that are known not to be encoded.</p>
<p>The encoded URL is a string containing only ASCII characters</p>
</dd></dl>

<dl class="py function">
<dt id="zim.parsing.valid_interwiki_key">
<code class="sig-prename descclassname">zim.parsing.</code><code class="sig-name descname">valid_interwiki_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.parsing.valid_interwiki_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zim.search">
<span id="zim-search-module"></span><h2>zim.search module<a class="headerlink" href="#module-zim.search" title="Permalink to this headline">¶</a></h2>
<p>This module contains the logic for searching in a notebook.</p>
<dl class="simple">
<dt>Supported operators:</dt><dd><ul class="simple">
<li><p>“NOT”, “not” and “-“</p></li>
<li><p>“AND”, “and”, “+” and “&amp;&amp;”</p></li>
<li><p>“OR”, “or” and “||”</p></li>
</ul>
</dd>
</dl>
<p>Order of precedence: AND, OR, NOT
so “foo AND NOT bar OR baz” means AND(foo, OR(NOT(bar), baz))</p>
<dl class="simple">
<dt>Supported keywords:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Content</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Section</span></code>: alias for “Name XXX or Name: XXX:<a href="#id13"><span class="problematic" id="id14">*</span></a>”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Namespace</span></code>: alias for “Name XXX or Name: XXX:<a href="#id15"><span class="problematic" id="id16">*</span></a>” – backward compatible</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Links</span></code>: forward - alias for linksfrom</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LinksFrom</span></code>: forward</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LinksTo</span></code>: backward</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ContentOrName</span></code>: the default, like Name: <em>X</em> or Content: X</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tag</span></code>: look for a single tag</p></li>
</ul>
</dd>
</dl>
<p>For the Content field we need to request the actual page contents,
all other fields we get from the index and are more efficient to
query.</p>
<p>For link keywords only a ‘*’ at the right side is allowed
For the name keyword a ‘*’ is allowed on both sides
For content ‘*’ can occur on both sides, but does not match whitespace</p>
<dl class="py class">
<dt id="zim.search.PageSelection">
<em class="property">class </em><code class="sig-prename descclassname">zim.search.</code><code class="sig-name descname">PageSelection</code><a class="headerlink" href="#zim.search.PageSelection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></p>
<p>This class is just a container of path objects</p>
</dd></dl>

<dl class="py class">
<dt id="zim.search.Query">
<em class="property">class </em><code class="sig-prename descclassname">zim.search.</code><code class="sig-name descname">Query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.search.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class wraps a query as typed by the user. It parses the
query into a tree of QueryGroup and QueryTerm objects. The ‘root’
attribute contains the top of the tree, while the ‘string’ attribute
contains the original query.</p>
</dd></dl>

<dl class="py class">
<dt id="zim.search.QueryGroup">
<em class="property">class </em><code class="sig-prename descclassname">zim.search.</code><code class="sig-name descname">QueryGroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">operator</span></em>, <em class="sig-param"><span class="n">terms</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.search.QueryGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
<p>Wrapper for a sub group of a query. Just a list of QueryTerms
with an associated operator (either AND or OR).</p>
</dd></dl>

<dl class="py class">
<dt id="zim.search.QueryTerm">
<em class="property">class </em><code class="sig-prename descclassname">zim.search.</code><code class="sig-name descname">QueryTerm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keyword</span></em>, <em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">inverse</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.search.QueryTerm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for a single term in a query. Consists of a keyword,
a string and a flag for inverse (NOT operator).</p>
</dd></dl>

<dl class="py class">
<dt id="zim.search.SearchSelection">
<em class="property">class </em><code class="sig-prename descclassname">zim.search.</code><code class="sig-name descname">SearchSelection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.search.SearchSelection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.search.PageSelection" title="zim.search.PageSelection"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.search.PageSelection</span></code></a></p>
<p>This class wraps a set of Page or ResultPath objects which result
from processing a search query. The attribute ‘scores’ gives a dict
with an arbitrary integer for each path in this set to rank how well
they match the query.</p>
<dl class="py method">
<dt id="zim.search.SearchSelection.search">
<code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">selection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">callback</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.search.SearchSelection.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Populate this SearchSelection with results for a query.
This method flushes any previous results in this set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> – a <a class="reference internal" href="#zim.search.Query" title="zim.search.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a> object</p></li>
<li><p><strong>selection</strong> – a prior selection to search within, will result in a sub-set</p></li>
<li><p><strong>callback</strong> – <p>a function to call in between steps in the search.
It is called as:</p>
<p>callback(selection, path)</p>
</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Where:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">selection</span></code> is a <a class="reference internal" href="#zim.search.SearchSelection" title="zim.search.SearchSelection"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchSelection</span></code></a> with partial results (if any)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">path</span></code> is the <code class="docutils literal notranslate"><span class="pre">Path</span></code> for the last searched path or <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</dd>
</dl>
<p>If the callback returns <code class="docutils literal notranslate"><span class="pre">False</span></code> the search is cancelled.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-zim.signals">
<span id="zim-signals-module"></span><h2>zim.signals module<a class="headerlink" href="#module-zim.signals" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="zim.signals.BlockSignalsContextManager">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">BlockSignalsContextManager</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">signals</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.BlockSignalsContextManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="zim.signals.BoundSignalHandler">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">BoundSignalHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em>, <em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.BoundSignalHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="zim.signals.BoundSignalHandler.blocked">
<code class="sig-name descname">blocked</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.BoundSignalHandler.blocked" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a context manager that can be used to temporarily
block a callback.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.signals.ConnectorMixin">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">ConnectorMixin</code><a class="headerlink" href="#zim.signals.ConnectorMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mixin class that has convenience methods for objects that
want to connect to signals of other objects.</p>
<dl class="py method">
<dt id="zim.signals.ConnectorMixin.connectto">
<code class="sig-name descname">connectto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="n">handler</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.ConnectorMixin.connectto" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to signals of another object
E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">connectto</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="s1">&#39;clicked&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_button_clicked</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – the object to connect to</p></li>
<li><p><strong>signal</strong> – the signal name</p></li>
<li><p><strong>handler</strong> – the callback function, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to map to
a method prefixed with “<a href="#id19"><span class="problematic" id="id20">on_</span></a>”.</p></li>
<li><p><strong>order</strong> – if order is <code class="docutils literal notranslate"><span class="pre">SIGNAL_NORMAL</span></code> then <code class="docutils literal notranslate"><span class="pre">GObject.connect()</span></code>
is used, if order is <code class="docutils literal notranslate"><span class="pre">SIGNAL_AFTER</span></code> then <code class="docutils literal notranslate"><span class="pre">GObject.connect_after()</span></code>
is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the handler id</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.ConnectorMixin.connectto_all">
<code class="sig-name descname">connectto_all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">signals</span></em>, <em class="sig-param"><span class="n">handler</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.ConnectorMixin.connectto_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to combine multiple calls to
<a class="reference internal" href="#zim.signals.ConnectorMixin.connectto" title="zim.signals.ConnectorMixin.connectto"><code class="xref py py-class docutils literal notranslate"><span class="pre">connectto()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – the object to connect to</p></li>
<li><p><strong>signals</strong> – <p>a list of signals. Elements can either be signal
names or tuples where the sub-elements are the parameters
for <a class="reference internal" href="#zim.signals.ConnectorMixin.connectto" title="zim.signals.ConnectorMixin.connectto"><code class="xref py py-class docutils literal notranslate"><span class="pre">connectto()</span></code></a>. For example:</p>
<dl class="simple">
<dt>self.connectto_all(some_object (</dt><dd><p>‘changed’ # defaults to “on_changed()
(‘open’, on_open_something, None, SIGNAL_AFTER),</p>
</dd>
</dl>
<p>))</p>
</p></li>
</ul>
</dd>
</dl>
<p>The optional parameters are used as default values when these
parameters are not specified explicitly per signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> – optional parameter</p></li>
<li><p><strong>order</strong> – optional parameter</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.ConnectorMixin.disconnect_all">
<code class="sig-name descname">disconnect_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.ConnectorMixin.disconnect_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect all signals that have been connected with
<a class="reference internal" href="#zim.signals.ConnectorMixin.connectto" title="zim.signals.ConnectorMixin.connectto"><code class="xref py py-class docutils literal notranslate"><span class="pre">connectto</span></code></a> and friends. Typically called when you want to
destroy this object.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.ConnectorMixin.disconnect_from">
<code class="sig-name descname">disconnect_from</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.ConnectorMixin.disconnect_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Disc all signals that have been connected with
<a class="reference internal" href="#zim.signals.ConnectorMixin.connectto" title="zim.signals.ConnectorMixin.connectto"><code class="xref py py-class docutils literal notranslate"><span class="pre">connectto</span></code></a> and friends to a specific object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.signals.DelayedCallback">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">DelayedCallback</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span></em>, <em class="sig-param"><span class="n">cb_func</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.DelayedCallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for callbacks that need to be delayed after a signal</p>
<p>This class allows you to add a callback to a signal, but only have
it called after a certain timeout. If the signal is emitted
again during this time the callback will be canceled and the
timeout starts again. (So the callback is not called for each repeat
of the signal.) This can be used e.g. in case want to update some
other widget after the user changes a text entry widget, but this
can be done once the user pauses, while calling the callback for
every key stroke would make the application non-responsive.</p>
<p>Objects of this class wrap the actual callback function and can be
called as a normal function.</p>
<p>Note that when a repeated callback is canceled, only the arguments
of the last call are passed on.</p>
<div class="admonition-todo admonition" id="id17">
<p class="admonition-title">Todo</p>
<p>allow an option to check arguments and pass on all unique
combinations ?</p>
</div>
<div class="admonition-todo admonition" id="id18">
<p class="admonition-title">Todo</p>
<p>add support for async callbacks, in this case block
the callback until the async process is finished</p>
</div>
<dl class="py method">
<dt id="zim.signals.DelayedCallback.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.DelayedCallback.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel the scheduled callback</p>
</dd></dl>

<dl class="py attribute">
<dt id="zim.signals.DelayedCallback.cb_func">
<code class="sig-name descname">cb_func</code><a class="headerlink" href="#zim.signals.DelayedCallback.cb_func" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.signals.DelayedCallback.timeout">
<code class="sig-name descname">timeout</code><a class="headerlink" href="#zim.signals.DelayedCallback.timeout" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zim.signals.DelayedCallback.timer_id">
<code class="sig-name descname">timer_id</code><a class="headerlink" href="#zim.signals.DelayedCallback.timer_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.signals.GSignalEmitterMixin">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">GSignalEmitterMixin</code><a class="headerlink" href="#zim.signals.GSignalEmitterMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Implements a subset of <a class="reference internal" href="#zim.signals.SignalEmitter" title="zim.signals.SignalEmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">SignalEmitter</span></code></a> to extend <code class="docutils literal notranslate"><span class="pre">GObject.GObject</span></code>
classes with methods to use signals as callbacks.</p>
<dl class="py method">
<dt id="zim.signals.GSignalEmitterMixin.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.GSignalEmitterMixin.connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.signals.GSignalEmitterMixin.connect_after">
<code class="sig-name descname">connect_after</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.GSignalEmitterMixin.connect_after" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.signals.GSignalEmitterMixin.disconnect">
<code class="sig-name descname">disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.GSignalEmitterMixin.disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.signals.GSignalEmitterMixin.emit_return_first">
<code class="sig-name descname">emit_return_first</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.GSignalEmitterMixin.emit_return_first" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.signals.GSignalEmitterMixin.emit_return_iter">
<code class="sig-name descname">emit_return_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.GSignalEmitterMixin.emit_return_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.signals.SignalEmitter">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">SignalEmitter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Replacement for <code class="docutils literal notranslate"><span class="pre">GObject</span></code> to make objects emit signals.
API should be (mostly) compatible with API offered by GObject.</p>
<p>Supported signals need to be defined in the dict <code class="docutils literal notranslate"><span class="pre">__signals__</span></code>. For
each signal a 3-tuple is provided where the first argument is either
<code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_FIRST</span></code> or <code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_LAST</span></code>, the second is the return
argument (or <code class="docutils literal notranslate"><span class="pre">None</span></code> for most signals) and the third is the argument
spec for the signal.</p>
<p>When a signal is emitted all handlers are called one by one and exceptions
in a handler are intercepted. If the class defines a method
<code class="docutils literal notranslate"><span class="pre">do_signalname()</span></code> (where “signalname” is the name of the signal with “-”
replaced by “_”) this is considered a default handler that is automatically
connected. The <code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_FIRST</span></code> and <code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_LAST</span></code> flags in the
signal spec control where in the  emission sequence this default handler
is called: it either runs as the first or as the last handler.
Typically the default handler is used to implement the change signalled by
the signal. So if your signal name suggests something happened already
(e.g. “changed”), probably you want to use <code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_FIRST</span></code>. However if
the action is phrased as still happening (e.g. “change”) and the handlers
can influence this, you probably want <code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_LAST</span></code>.</p>
<p>Signals connected with <a class="reference internal" href="#zim.signals.SignalEmitter.connect_after" title="zim.signals.SignalEmitter.connect_after"><code class="xref py py-class docutils literal notranslate"><span class="pre">connect_after()</span></code></a> always run after all the normal
handlers (which are connected with <a class="reference internal" href="#zim.signals.SignalEmitter.connect" title="zim.signals.SignalEmitter.connect"><code class="xref py py-class docutils literal notranslate"><span class="pre">connect()</span></code></a>) and after the default handler
(even if the default handler is setup with <code class="docutils literal notranslate"><span class="pre">SIGNAL_RUN_LAST</span></code>).</p>
<p>If a signal defines a return type, emission should use either
<a class="reference internal" href="#zim.signals.SignalEmitter.emit_return_first" title="zim.signals.SignalEmitter.emit_return_first"><code class="xref py py-class docutils literal notranslate"><span class="pre">emit_return_first()</span></code></a> or <a class="reference internal" href="#zim.signals.SignalEmitter.emit_return_iter" title="zim.signals.SignalEmitter.emit_return_iter"><code class="xref py py-class docutils literal notranslate"><span class="pre">emit_return_iter()</span></code></a> to handle return values.</p>
<p>(Also see the Glib documentation to understand the full system of which
we implement a sub-set here.)</p>
<dl class="py method">
<dt id="zim.signals.SignalEmitter.block_signals">
<code class="sig-name descname">block_signals</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">signals</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.block_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a context manager for blocking one or more signals</p>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.SignalEmitter.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a handler for a specific object.</p>
<p>Note that connecting makes a hard reference to the connected
object. So connecting an bound method will prevent the
object the method belongs to to be destroyed until the
signal is disconnected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal</strong> – the signal name</p></li>
<li><p><strong>handler</strong> – callback to be called upon the signal,
first object to the callback will be the emitting object,
other params are signal specific.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an id for the registered handler</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.SignalEmitter.connect_after">
<code class="sig-name descname">connect_after</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.connect_after" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#zim.signals.SignalEmitter.connect" title="zim.signals.SignalEmitter.connect"><code class="xref py py-class docutils literal notranslate"><span class="pre">connect()</span></code></a> but handler will be called after default handler</p>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.SignalEmitter.disconnect">
<code class="sig-name descname">disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handlerid</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.signals.SignalEmitter.emit">
<code class="sig-name descname">emit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.emit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.signals.SignalEmitter.emit_return_first">
<code class="sig-name descname">emit_return_first</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.emit_return_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits a signal and stops emission on the first handler that returns
a not-None value.</p>
</dd></dl>

<dl class="py method">
<dt id="zim.signals.SignalEmitter.emit_return_iter">
<code class="sig-name descname">emit_return_iter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitter.emit_return_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an generator that calls one handler on each iteration and
yields the return values. This allows aggregating return values.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.signals.SignalEmitterMeta">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">SignalEmitterMeta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">bases</span></em>, <em class="sig-param"><span class="n">dct</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalEmitterMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="zim.signals.SignalHandler">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">SignalHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for a signal handler method that allows blocking the
handler for incoming signals. To be used as function decorator.</p>
<p>The method will be replaced by a <a class="reference internal" href="#zim.signals.BoundSignalHandler" title="zim.signals.BoundSignalHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoundSignalHandler</span></code></a> object that
supports a <code class="docutils literal notranslate"><span class="pre">blocked()</span></code> method which returns a context manager
to temporarily block a callback.</p>
<p>Intended to be used as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">():</span>

        <span class="nd">@SignalHandler</span>
        <span class="k">def</span> <span class="nf">on_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="o">...</span>

        <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_changed</span><span class="o">.</span><span class="n">blocked</span><span class="p">():</span>
                        <span class="o">...</span> <span class="c1"># do something that results in a &quot;changed&quot; signal</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="zim.signals.SignalHandlerBlockContextManager">
<em class="property">class </em><code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">SignalHandlerBlockContextManager</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.SignalHandlerBlockContextManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="zim.signals.callback">
<code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">callback</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">arg</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwarg</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a wrapper functions that call func and.
Intended as wrapper for callbacks connected to (gtk) signals. The
wrapper ignores any arguments given.</p>
</dd></dl>

<dl class="py function">
<dt id="zim.signals.init_signals_for_new_object">
<code class="sig-prename descclassname">zim.signals.</code><code class="sig-name descname">init_signals_for_new_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.signals.init_signals_for_new_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zim.tokenparser">
<span id="zim-tokenparser-module"></span><h2>zim.tokenparser module<a class="headerlink" href="#module-zim.tokenparser" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt id="zim.tokenparser.EndOfTokenListError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">EndOfTokenListError</code><a class="headerlink" href="#zim.tokenparser.EndOfTokenListError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AssertionError</span></code></p>
</dd></dl>

<dl class="py class">
<dt id="zim.tokenparser.TokenBuilder">
<em class="property">class </em><code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">TokenBuilder</code><a class="headerlink" href="#zim.tokenparser.TokenBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.parser.Builder" title="zim.parser.Builder"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.parser.Builder</span></code></a></p>
<dl class="py method">
<dt id="zim.tokenparser.TokenBuilder.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">text</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenBuilder.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to open a tag, append text and close
it immediatly. Only used for formatted text that has no
sub-processing done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
<li><p><strong>text</strong> – formatted text</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>optional for subclasses, default implementation
calls <a class="reference internal" href="#zim.tokenparser.TokenBuilder.start" title="zim.tokenparser.TokenBuilder.start"><code class="xref py py-class docutils literal notranslate"><span class="pre">start()</span></code></a>, <a class="reference internal" href="#zim.tokenparser.TokenBuilder.text" title="zim.tokenparser.TokenBuilder.text"><code class="xref py py-class docutils literal notranslate"><span class="pre">text()</span></code></a>, and <a class="reference internal" href="#zim.tokenparser.TokenBuilder.end" title="zim.tokenparser.TokenBuilder.end"><code class="xref py py-class docutils literal notranslate"><span class="pre">end()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.tokenparser.TokenBuilder.end">
<code class="sig-name descname">end</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenBuilder.end" title="Permalink to this definition">¶</a></dt>
<dd><p>End formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – the tag name</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>XXX</strong> – when tag does not match current state</p>
</dd>
<dt class="field-odd">Implementation</dt>
<dd class="field-odd"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.tokenparser.TokenBuilder.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tag</span></em>, <em class="sig-param"><span class="n">attrib</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenBuilder.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start formatted region</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> – the tag name</p></li>
<li><p><strong>attrib</strong> – optional dict with attributes</p></li>
</ul>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.tokenparser.TokenBuilder.text">
<code class="sig-name descname">text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenBuilder.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Append text</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>text</strong> – text to be appended as string</p>
</dd>
<dt class="field-even">Implementation</dt>
<dd class="field-even"><p>must be implemented by sub-classes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.tokenparser.TokenBuilder.tokens">
<em class="property">property </em><code class="sig-name descname">tokens</code><a class="headerlink" href="#zim.tokenparser.TokenBuilder.tokens" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.tokenparser.TokenParser">
<em class="property">class </em><code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">TokenParser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="zim.tokenparser.TokenParser.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokens</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenParser.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.tokenparser.TokenVisitor">
<em class="property">class </em><code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">TokenVisitor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokens</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenVisitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="zim.tokenparser.TokenVisitor.visit">
<code class="sig-name descname">visit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">builder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.TokenVisitor.visit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.tokenparser.collect_untill_end_token">
<code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">collect_untill_end_token</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">token_iter</span></em>, <em class="sig-param"><span class="n">end_token</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.collect_untill_end_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.tokenparser.reverseTopLevelLists">
<code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">reverseTopLevelLists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokens</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.reverseTopLevelLists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.tokenparser.skip_to_end_token">
<code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">skip_to_end_token</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">token_iter</span></em>, <em class="sig-param"><span class="n">end_token</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.skip_to_end_token" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.tokenparser.testTokenStream">
<code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">testTokenStream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">token_iter</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.testTokenStream" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.tokenparser.tokens_to_text">
<code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">tokens_to_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">token_iter</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.tokens_to_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.tokenparser.topLevelLists">
<code class="sig-prename descclassname">zim.tokenparser.</code><code class="sig-name descname">topLevelLists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tokens</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.tokenparser.topLevelLists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zim.utils">
<span id="zim-utils-module"></span><h2>zim.utils module<a class="headerlink" href="#module-zim.utils" title="Permalink to this headline">¶</a></h2>
<p>Module with assorted useful classes and functions used in the zim code</p>
<dl class="py class">
<dt id="zim.utils.DefinitionOrderedDict">
<em class="property">class </em><code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">DefinitionOrderedDict</code><a class="headerlink" href="#zim.utils.DefinitionOrderedDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></p>
<p>Class that behaves like a dict but keeps items the order they were defined.
Updating an items keeps it at the current position, removing and
re-inserting an item puts it at the end of the sequence.</p>
</dd></dl>

<dl class="py class">
<dt id="zim.utils.MovingWindowIter">
<em class="property">class </em><code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">MovingWindowIter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.MovingWindowIter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Iterator yields a 3-tuple of the previous item, the current item
and the next item while iterating a give iterator.
Previous or next item will be <code class="docutils literal notranslate"><span class="pre">None</span></code> if not available.
Use as:</p>
<blockquote>
<div><dl class="simple">
<dt>for prev, current, next in MovingWindowIter(mylist):</dt><dd></dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="zim.gui.html#zim.gui.widgets.InputForm.items" title="zim.gui.widgets.InputForm.items"><strong>items</strong></a> – current 3-tuple</p></li>
<li><p><strong>last</strong> – <code class="docutils literal notranslate"><span class="pre">True</span></code> if we are at the last item</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="zim.utils.classproperty">
<em class="property">class </em><code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">classproperty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.classproperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Like <code class="docutils literal notranslate"><span class="pre">property()</span></code> but for klass properties
Typically used as decorator</p>
</dd></dl>

<dl class="py function">
<dt id="zim.utils.get_module">
<code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">get_module</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.get_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – the module name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>module object</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ImportError</strong> – if the given name does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.utils.lookup_subclass">
<code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">lookup_subclass</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">module</span></em>, <em class="sig-param"><span class="n">klass</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.lookup_subclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Look for a subclass of klass in the module</p>
<p>This function is used in several places in zim to get extension
classes. Typically <a class="reference internal" href="#zim.utils.get_module" title="zim.utils.get_module"><code class="xref py py-class docutils literal notranslate"><span class="pre">get_module()</span></code></a> is used first to get the module
object, then this lookup function is used to locate a class that
derives of a base class (e.g. PluginClass).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module</strong> – module object</p></li>
<li><p><strong>klass</strong> – base class</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>don’t actually use this method to get plugin classes, see
<code class="xref py py-class docutils literal notranslate"><span class="pre">PluginManager.get_plugin_class()</span></code> instead.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="zim.utils.lookup_subclasses">
<code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">lookup_subclasses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">module</span></em>, <em class="sig-param"><span class="n">klass</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.lookup_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Look for all subclasses of klass in the module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module</strong> – module object</p></li>
<li><p><strong>klass</strong> – base class</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.utils.natural_sort">
<code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">natural_sort</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.natural_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Natural sort a list in place.
See <a class="reference internal" href="#zim.utils.natural_sort_key" title="zim.utils.natural_sort_key"><code class="xref py py-class docutils literal notranslate"><span class="pre">natural_sort_key</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list</strong> – list of strings to be sorted</p></li>
<li><p><strong>key</strong> – function producing strings for list items</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.utils.natural_sort_key">
<code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">natural_sort_key</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">numeric_padding</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.natural_sort_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Format string such that it gives ‘natural’ sorting on string
compare. Will pad any numbers in the string with “0” such that “10”
sorts after “9”. Also includes <code class="docutils literal notranslate"><span class="pre">locale.strxfrm()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>sorting not 100% stable for case, so order between “foo” and
“Foo” is not defined. For this reason when sort needs to be absolutely
stable it is advised to sort based on tuples of
<code class="docutils literal notranslate"><span class="pre">(sort_key,</span> <span class="pre">original_string)</span></code>. Or use either <a class="reference internal" href="#zim.utils.natural_sort" title="zim.utils.natural_sort"><code class="xref py py-class docutils literal notranslate"><span class="pre">natural_sort()</span></code></a> or
<a class="reference internal" href="#zim.utils.natural_sorted" title="zim.utils.natural_sorted"><code class="xref py py-class docutils literal notranslate"><span class="pre">natural_sorted()</span></code></a> instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – the string to format</p></li>
<li><p><strong>numeric_padding</strong> – number of digits to use for padding</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>string transformed to sorting key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="zim.utils.natural_sorted">
<code class="sig-prename descclassname">zim.utils.</code><code class="sig-name descname">natural_sorted</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iter</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.utils.natural_sorted" title="Permalink to this definition">¶</a></dt>
<dd><p>Natural sort a list.
See <a class="reference internal" href="#zim.utils.natural_sort_key" title="zim.utils.natural_sort_key"><code class="xref py py-class docutils literal notranslate"><span class="pre">natural_sort_key</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iter</strong> – list or iterable of strings to be sorted</p></li>
<li><p><strong>key</strong> – function producing strings for list items</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sorted copy of the list</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim.www">
<span id="zim-www-module"></span><h2>zim.www module<a class="headerlink" href="#module-zim.www" title="Permalink to this headline">¶</a></h2>
<p>This module contains a web interface for zim. This is an alternative
to the GUI application.</p>
<p>It can be run either as a stand-alone web server or embedded in another
server as a cgi-bin script or using  one of the python web frameworks
using the “WSGI” API.</p>
<p>The main classes here are <a class="reference internal" href="#zim.www.WWWInterface" title="zim.www.WWWInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">WWWInterface</span></code></a> which implements the interface
(and is callable as a “WSGI” application) and <code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code> which implements
the standalone server.</p>
<dl class="py exception">
<dt id="zim.www.WWWError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">WWWError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msg</span></em>, <em class="sig-param"><span class="n">status</span><span class="o">=</span><span class="default_value">'500'</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.errors.Error" title="zim.errors.Error"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.errors.Error</span></code></a></p>
<p>Error with http error code</p>
<dl class="py attribute">
<dt id="zim.www.WWWError.statusstring">
<code class="sig-name descname">statusstring</code><em class="property"> = {'403': 'Forbidden', '404': 'Not Found', '405': 'Method Not Allowed', '500': 'Internal Server Error'}</em><a class="headerlink" href="#zim.www.WWWError.statusstring" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping of error number to string - extend when needed</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.www.WWWInterface">
<em class="property">class </em><code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">WWWInterface</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">template</span><span class="o">=</span><span class="default_value">'Default'</span></em>, <em class="sig-param"><span class="n">auth_creds</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to handle the WWW interface for zim notebooks.</p>
<p>Objects of this class are callable, so they can be used as application
objects within a WSGI compatible framework. See PEP 333 for details
(U{<a class="reference external" href="http://www.python.org/dev/peps/pep-0333/">http://www.python.org/dev/peps/pep-0333/</a>}).</p>
<p>For basic handlers to run this interface see the “wsgiref” package
in the standard library for python.</p>
<dl class="py method">
<dt id="zim.www.WWWInterface.render_index">
<code class="sig-name descname">render_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">namespace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWInterface.render_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Render an index page</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>namespace</strong> – the namespace <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>html as a list of lines</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.www.WWWInterface.render_page">
<code class="sig-name descname">render_page</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">page</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWInterface.render_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Render a single page from the notebook</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>page</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code> object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>html as a list of lines</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zim.www.WWWLinker">
<em class="property">class </em><code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">WWWLinker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">resources_dir</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">source</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWLinker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="zim.export.html#zim.export.linker.ExportLinker" title="zim.export.linker.ExportLinker"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.export.linker.ExportLinker</span></code></a></p>
<p>Implements a linker that returns the correct
links for the way the server handles URLs.</p>
<dl class="py method">
<dt id="zim.www.WWWLinker.file_object">
<code class="sig-name descname">file_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWLinker.file_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object in a relative link or URI</p>
</dd></dl>

<dl class="py method">
<dt id="zim.www.WWWLinker.icon">
<code class="sig-name descname">icon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWLinker.icon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zim.www.WWWLinker.page_object">
<code class="sig-name descname">page_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWLinker.page_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> object in a relative link or URI</p>
</dd></dl>

<dl class="py method">
<dt id="zim.www.WWWLinker.resolve_source_file">
<code class="sig-name descname">resolve_source_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">link</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWLinker.resolve_source_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the source file for an attachment
Used e.g. by the latex format to find files for equations to
be inlined. Do not use this method to resolve links, the file
given here might be temporary and is not guaranteed to be
available after the export.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code> object or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no file was found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zim.www.WWWLinker.resource">
<code class="sig-name descname">resource</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WWWLinker.resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an url for template resources</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.www.WebPageNotFoundError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">WebPageNotFoundError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">page</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.WebPageNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.www.WWWError" title="zim.www.WWWError"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.www.WWWError</span></code></a></p>
<p>Error whan a page is not found (404)</p>
<dl class="py attribute">
<dt id="zim.www.WebPageNotFoundError.description">
<code class="sig-name descname">description</code><em class="property"> = 'You tried to open a page that does not exist.\n'</em><a class="headerlink" href="#zim.www.WebPageNotFoundError.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="zim.www.WebPathNotValidError">
<em class="property">exception </em><code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">WebPathNotValidError</code><a class="headerlink" href="#zim.www.WebPathNotValidError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zim.www.WWWError" title="zim.www.WWWError"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.www.WWWError</span></code></a></p>
<p>Error when the url points to an invalid page path</p>
<dl class="py attribute">
<dt id="zim.www.WebPathNotValidError.description">
<code class="sig-name descname">description</code><em class="property"> = 'The requested path is not valid\n'</em><a class="headerlink" href="#zim.www.WebPathNotValidError.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zim.www.main">
<code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">port</span><span class="o">=</span><span class="default_value">8080</span></em>, <em class="sig-param"><span class="n">public</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">opts</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zim.www.make_server">
<code class="sig-prename descclassname">zim.www.</code><code class="sig-name descname">make_server</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">notebook</span></em>, <em class="sig-param"><span class="n">port</span><span class="o">=</span><span class="default_value">8080</span></em>, <em class="sig-param"><span class="n">public</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">auth_creds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">opts</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zim.www.make_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a simple http server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>notebook</strong> – the notebook location</p></li>
<li><p><strong>port</strong> – the http port to serve on</p></li>
<li><p><strong>public</strong> – allow connections to the server from other
computers - if <code class="docutils literal notranslate"><span class="pre">False</span></code> can only connect from localhost</p></li>
<li><p><strong>auth_creds</strong> – credentials for HTTP-authentication</p></li>
<li><p><strong>opts</strong> – options for <code class="xref py py-class docutils literal notranslate"><span class="pre">WWWInterface.__init__()</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <code class="docutils literal notranslate"><span class="pre">WSGIServer</span></code> object</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-zim">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-zim" title="Permalink to this headline">¶</a></h2>
<p>This is the development documentation of zim.</p>
<p><strong>NOTE:</strong> There is also some generic development documentation in the
“CONTRIBUTING.md” file in the source distribution. Please also have a look
at that if you want to help with zim development.</p>
<p>In this API documentation many of the methods with names starting with
<code class="docutils literal notranslate"><span class="pre">do_</span></code> and <code class="docutils literal notranslate"><span class="pre">on_</span></code> are not documented. The reason is that these are
signal handlers that are not part of the external API. They act upon
a signal but should never be called directly by other objects.</p>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">zim.py</span></code> is a thin wrapper around the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function
defined in <a class="reference internal" href="zim.main.html#module-zim.main" title="zim.main"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.main</span></code></a>. This main function constructs a <code class="docutils literal notranslate"><span class="pre">Command</span></code>
object that implements a specific commandline command. The <code class="docutils literal notranslate"><span class="pre">Command</span></code>
object then either connects to a running instance of zim, or executes
the application.</p>
<p>To execute the application, the command typically constructs a <code class="docutils literal notranslate"><span class="pre">Notebook</span></code> and
depending on the command the graphical interface is constructed, a webserver is
started or some other action is executed on the notebook.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Notebook</span></code> object is found in <a class="reference internal" href="zim.notebook.html#module-zim.notebook" title="zim.notebook"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.notebook</span></code></a> and implements the
API for accessing and storing pages, attachments and other data in
the notebook folder.</p>
<p>The notebook works together with an <code class="docutils literal notranslate"><span class="pre">Index</span></code> object which keeps a
SQLite database of all the pages to speed up notebook access and allows
to e.g. show a list of pages in the side pane of the user interface.</p>
<p>Another aspect of the notebook is the parsing of the wiki text in the
pages such that it can be shown in the interface or exported to another
format. See <a class="reference internal" href="zim.formats.html#module-zim.formats" title="zim.formats"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.formats</span></code></a> for implementations of different parsers.</p>
<p>All classes related to configuration are located in <a class="reference internal" href="zim.config.html#module-zim.config" title="zim.config"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.config</span></code></a>.
The <code class="docutils literal notranslate"><span class="pre">ConfigManager</span></code> handles looking up config files and provides them
for all components.</p>
<p>Plugins are defined as sub-modules of <a class="reference internal" href="zim.plugins.html#module-zim.plugins" title="zim.plugins"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.plugins</span></code></a>. The
<code class="docutils literal notranslate"><span class="pre">PluginManager</span></code> manages the plugins that are loaded and objects that
can be extended by plugins.</p>
<p>The graphical user interface is implemented in the <a class="reference internal" href="zim.gui.html#module-zim.gui" title="zim.gui"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.gui</span></code></a> module
and it’s sub-modules. The webinterface is implemented in <a class="reference internal" href="#module-zim.www" title="zim.www"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.www</span></code></a>.</p>
<p>Functionality for exporting content is implemented in <code class="xref py py-class docutils literal notranslate"><span class="pre">zim.exporter</span></code>.
And search functionality can be found in <a class="reference internal" href="#module-zim.search" title="zim.search"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.search</span></code></a>.</p>
<p>Many classes in zim have signals which allow other objects to connect
to a listen for specific events. This allows for an event driven chain
of control, which is mainly used in the graphical interface, but is
also used elsewhere. If you are not familiar with event driven programs
please refer to a Gtk manual.</p>
<div class="section" id="infrastructure-classes">
<h4>Infrastructure classes<a class="headerlink" href="#infrastructure-classes" title="Permalink to this headline">¶</a></h4>
<p>All functions and objects to interact with the file system can be
found in <a class="reference internal" href="#module-zim.fs" title="zim.fs"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.fs</span></code></a>.</p>
<p>For executing external applications see <a class="reference internal" href="#module-zim.applications" title="zim.applications"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.applications</span></code></a> or
<a class="reference internal" href="zim.gui.html#module-zim.gui.applications" title="zim.gui.applications"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.gui.applications</span></code></a>.</p>
<p>Some generic base classes and functions can be found in <a class="reference internal" href="#module-zim.utils" title="zim.utils"><code class="xref py py-class docutils literal notranslate"><span class="pre">zim.utils</span></code></a></p>
<p>&#64;newfield signal: Signal, Signals
&#64;newfield emits: Emits, Emits
&#64;newfield implementation: Implementation</p>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Zim Desktop Wiki</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Jaap Karssenberg and contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="sources/zim.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>