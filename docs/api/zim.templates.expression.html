<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>zim.templates.expression</title>
    <meta name="generator" content="pydoctor 21.12.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            <a href="https://zim-wiki.org/" class="projecthome">zim-desktop-wiki</a> <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="zim.html">zim</a></code><wbr></wbr>.<code><a href="zim.templates.html">templates</a></code><wbr></wbr>.<code><a href="zim.templates.expression.html">expression</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/templates/expression.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p>Module that contains the logic for evaluating expressions in the template.</p>
<p>Expression evaluation is done without using a real python eval to keep it safe from arbitrary code execution</p>
<p>Both parameter values and functions are stored in a dict that is passed to the Expression object when it is executed. The expressions should not allow access to anything outside this dict, and only sane access to objects reachable from this dict.</p>
<p>Parameter lookup gets list and dict items as well as object attributes. It does not allow accessing private attributes (starting with "_") or or code objects (object method of function) - callable objects on the other hand can be accessed.</p>
<p>We control execution by only executing functions that are specifically whitelisted as being an ExpressionFunction (can be used as decorator). The expression classes have builtin support for some builtin methods on strings, lists and dicts (see <code>ExpressionString</code>, <code>ExpressionDict</code> and <code><a href="zim.templates.expression.ExpressionList.html">ExpressionList</a></code> respectively), other functions can be supplied in the context dict or as object attributes.</p>
<p>The biggest risks would be to put objects in the dict that allow access to dangerous methods or private data. Or to have functions that e.g. eval one of their arguments or take a callable argument</p>
<p>The idea is that objects in the expression dict are proxies that expose a sub set of the full object API and template friendly methods. These restrictions hsould help to minimize risk of arbitrary code execution in expressions.</p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id1519">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.BoundExpressionFunction.html">BoundExpressionFunction</a></code></td>
    <td>Wrapper used by <code><a href="zim.templates.expression.ExpressionFunction.html">ExpressionFunction</a></code> when used as a decorator for object methods.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.Expression.html">Expression</a></code></td>
    <td>Base class for all expressions</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionDictObject.html">ExpressionDictObject</a></code></td>
    <td>Proxy for dict objects that gives safe methods for use in expressions.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionFunction.html">ExpressionFunction</a></code></td>
    <td>Wrapper for methods and functions that whitelists functions to be called from expressions</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionFunctionCall.html">ExpressionFunctionCall</a></code></td>
    <td>Expression with a function name and arguments, recurses for the arguments and evaluates the function.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionList.html">ExpressionList</a></code></td>
    <td>Expression for a list of expressions, recurses on all items when evaluated</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionListObject.html">ExpressionListObject</a></code></td>
    <td>Proxy for list objects that gives safe methods for use in expressions.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionLiteral.html">ExpressionLiteral</a></code></td>
    <td>Expression with a literal value</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionObjectBase.html">ExpressionObjectBase</a></code></td>
    <td>Base method for wrapper objects that are used to determine the safe functions to call on objects in the parameter dict.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionOperator.html">ExpressionOperator</a></code></td>
    <td>Expression for an operator statement (e.g. "AND", "OR", "&lt;"), recurses for left and right side of the expression.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionParameter.html">ExpressionParameter</a></code></td>
    <td>Expression with a parameter name, evaluates the parameter value</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionStringObject.html">ExpressionStringObject</a></code></td>
    <td>Proxy for string objects that gives safe methods for use in expressions.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="zim.templates.expression.ExpressionUnaryOperator.html">ExpressionUnaryOperator</a></code></td>
    <td>Expression with a unary operator (e.g. "NOT") that recurses for the right hand side of the statement.</td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#logger">logger</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basevariable">
  
  
  <a name="zim.templates.expression.logger">
    
  </a>
  <a name="logger">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">logger</span> =
    <a class="sourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/templates/expression.py#L43">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://zim-wiki.org/" class="projecthome">zim-desktop-wiki</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.12.0 at 2022-01-07 17:18:19.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>