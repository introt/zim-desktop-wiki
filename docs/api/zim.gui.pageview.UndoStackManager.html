<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>zim.gui.pageview.UndoStackManager : API documentation</title>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header navbar-brand">
          <a href="https://zim-wiki.org/">zim-desktop-wiki</a>
          <a href="index.html">API Documentation</a>
        </div>
      </div>
    </nav>

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="zim.html">zim</a></code>.<code><a href="zim.gui.html">gui</a></code>.<code><a href="zim.gui.pageview.html">pageview</a></code>.<code><a href="zim.gui.pageview.UndoStackManager.html">UndoStackManager</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">UndoStackManager</span>: <a href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L4977">(source)</a></code></p>
        <p><a href="classIndex.html#zim.gui.pageview.UndoStackManager">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>Undo stack implementation for <code><a href="zim.gui.pageview.TextBuffer.html">TextBuffer</a></code>. It records any changes to the buffer and allows undoing and redoing edits.</p><p>The stack undostack will be folded when you undo a few steps and then start editing again. This means that even the 'undo' action is recorded in the undo stakc and can always be undone itself; so no data is discarded.</p><p>Say you start with a certain buffer state "A", then make two edits ("B" and "C") and then undo the last one, so you get back in state "B":</p><pre class="literalblock">
  State A --&gt; State B --&gt; State C
                      &lt;--
                      undo
</pre><p>when you now make a new edit ("D"), state "C" is not discarded, instead it is "folded" as follows:</p><pre class="literalblock">
  State A --&gt; State B --&gt; State C --&gt; State B --&gt; State D
</pre><p>so you can still go back to state "C" using Undo.</p><h1>Undo actions</h1><p>Each action is recorded as a 4-tuple of:</p><ul><li><code>action_type</code>: one of <code>ACTION_INSERT</code>, <code>ACTION_DELETE</code>, <code>ACTION_APPLY_TAG</code>, <code>ACTION_REMOVE_TAG</code></li><li><code>start_iter</code>: a <code>Gtk.TextIter</code></li><li><code>end_iter</code>: a <code>Gtk.TextIter</code></li><li><code>data</code>: either a (raw) <code><a href="zim.formats.ParseTree.html">ParseTree</a></code> or a <code>Gtk.TextTag</code></li></ul><p>These actions are low level operations, so they are</p><p>Actions are collected as <code><a href="zim.gui.pageview.UndoActionGroup.html">UndoActionGroup</a></code>s. When the user selects Undo or Redo we actually undo or redo a whole UndoActionGroup as a single step. E.g. inserting a link will consist of inserting the text and than applying the TextTag with the link data. These are technically two separate modifications of the TextBuffer, however when selecting Undo both are undone at once because they are combined in a single group.</p><p>Typically when recording modifications the action groups are delimited by the begin-user-action and end-user-action signals of the <code><a href="zim.gui.pageview.TextBuffer.html">TextBuffer</a></code>. (This is why we use the <code><a href="zim.gui.pageview.TextBuffer.html#user_action">TextBuffer.user_action</a></code> attribute context manager in the TextBuffer code.)</p><p>Also we try to group single-character inserts and deletes into words. This makes the stack more compact and makes the undo action more meaningful.</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id355">
  
  <tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#MAX_UNDO">MAX_UNDO</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#ACTION_INSERT">ACTION_INSERT</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#ACTION_DELETE">ACTION_DELETE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#ACTION_APPLY_TAG">ACTION_APPLY_TAG</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#ACTION_REMOVE_TAG">ACTION_REMOVE_TAG</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__">__init__</a></code></td>
    <td><span>Constructor</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#buffer">buffer</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#stack">stack</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#group">group</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#interactive">interactive</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#insert_pending">insert_pending</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#undo_count">undo_count</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#block_count">block_count</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#recording_handlers">recording_handlers</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#block">block</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#unblock">unblock</a></code></td>
    <td><span>Start listening to events from the <code><a href="zim.gui.pageview.TextBuffer.html">TextBuffer</a></code> again</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_save_cursor">do_save_cursor</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_begin_user_action">do_begin_user_action</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_end_user_action">do_end_user_action</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_begin_insert_tree">do_begin_insert_tree</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_end_insert_tree">do_end_insert_tree</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_insert_text">do_insert_text</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_insert_pixbuf">do_insert_pixbuf</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#flush_insert">flush_insert</a></code></td>
    <td><span>Flush all pending actions and store them on the stack</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_delete_range">do_delete_range</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#do_change_tag">do_change_tag</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#undo">undo</a></code></td>
    <td><span>Undo one user action</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#flush_redo_stack">flush_redo_stack</a></code></td>
    <td><span>Fold the "redo" part of the stack, called before new actions are appended after some step was undone.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#redo">redo</a></code></td>
    <td><span>Redo one user action</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_insert_tree_start">_insert_tree_start</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_replay">_replay</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="baseclassvariable">
  
  <a name="zim.gui.pageview.UndoStackManager.MAX_UNDO">
    
  </a>
  <a name="MAX_UNDO">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">MAX_UNDO</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5038">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="baseclassvariable">
  
  <a name="zim.gui.pageview.UndoStackManager.ACTION_INSERT">
    
  </a>
  <a name="ACTION_INSERT">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ACTION_INSERT</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5041">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="baseclassvariable">
  
  <a name="zim.gui.pageview.UndoStackManager.ACTION_DELETE">
    
  </a>
  <a name="ACTION_DELETE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ACTION_DELETE</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5042">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="baseclassvariable">
  
  <a name="zim.gui.pageview.UndoStackManager.ACTION_APPLY_TAG">
    
  </a>
  <a name="ACTION_APPLY_TAG">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ACTION_APPLY_TAG</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5043">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="baseclassvariable">
  
  <a name="zim.gui.pageview.UndoStackManager.ACTION_REMOVE_TAG">
    
  </a>
  <a name="ACTION_REMOVE_TAG">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ACTION_REMOVE_TAG</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5044">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, textbuffer):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5046">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Constructor</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">textbuffer</td><td>a <code>Gtk.TextBuffer</code></td></tr></table></div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.buffer">
    
  </a>
  <a name="buffer">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">buffer</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5051">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.stack">
    
  </a>
  <a name="stack">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">stack</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5052">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.group">
    
  </a>
  <a name="group">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">group</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5053">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.interactive">
    
  </a>
  <a name="interactive">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">interactive</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5054">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.insert_pending">
    
  </a>
  <a name="insert_pending">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">insert_pending</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5055">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.undo_count">
    
  </a>
  <a name="undo_count">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">undo_count</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5056">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.block_count">
    
  </a>
  <a name="block_count">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">block_count</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5057">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
  </div>
</div><div class="baseinstancevariable private">
  
  <a name="zim.gui.pageview.UndoStackManager._insert_tree_start">
    
  </a>
  <a name="_insert_tree_start">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_insert_tree_start</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5058">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable">
  
  <a name="zim.gui.pageview.UndoStackManager.recording_handlers">
    
  </a>
  <a name="recording_handlers">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">recording_handlers</span> =
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5060">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div> (type: <code><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.block">
    
  </a>
  <a name="block">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">block</span>(self):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5097">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Stop listening to events from the <code><a href="zim.gui.pageview.TextBuffer.html">TextBuffer</a></code> until the next call to <code><a href="#unblock">unblock()</a></code>. Any change in between will not be undo-able (and mess up the undo stack) unless it is recorded explicitly.</p><p>The number of calls <code>block()</code> and <code>unblock()</code> is counted, so they can be called recursively.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.unblock">
    
  </a>
  <a name="unblock">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">unblock</span>(self):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5111">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Start listening to events from the <code><a href="zim.gui.pageview.TextBuffer.html">TextBuffer</a></code> again</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_save_cursor">
    
  </a>
  <a name="do_save_cursor">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_save_cursor</span>(self, buffer, iter):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5120">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_begin_user_action">
    
  </a>
  <a name="do_begin_user_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_begin_user_action</span>(self, buffer):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5124">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_end_user_action">
    
  </a>
  <a name="do_end_user_action">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_end_user_action</span>(self, buffer):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5137">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_begin_insert_tree">
    
  </a>
  <a name="do_begin_insert_tree">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_begin_insert_tree</span>(self, buffer, interactive):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5147">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_end_insert_tree">
    
  </a>
  <a name="do_end_insert_tree">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_end_insert_tree</span>(self, buffer):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5158">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_insert_text">
    
  </a>
  <a name="do_insert_text">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_insert_text</span>(self, buffer, iter, text, length):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5168">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_insert_pixbuf">
    
  </a>
  <a name="do_insert_pixbuf">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_insert_pixbuf</span>(self, buffer, iter, pixbuf):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5197">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.flush_insert">
    
  </a>
  <a name="flush_insert">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">flush_insert</span>(self):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5211">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Flush all pending actions and store them on the stack</p><p>The reason for this method is that because of the possibility of merging actions we do not immediatly request the parse tree for each single character insert. Instead we first group inserts based on cursor positions and then request the parse tree for the group at once. This method proceses all such delayed requests.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_delete_range">
    
  </a>
  <a name="do_delete_range">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_delete_range</span>(self, buffer, start, end):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5241">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.do_change_tag">
    
  </a>
  <a name="do_change_tag">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">do_change_tag</span>(self, buffer, tag, start, end, action):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5255">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.undo">
    
  </a>
  <a name="undo">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">undo</span>(self):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5277">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Undo one user action</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.flush_redo_stack">
    
  </a>
  <a name="flush_redo_stack">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">flush_redo_stack</span>(self):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5297">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Fold the "redo" part of the stack, called before new actions are appended after some step was undone.</p></div>
  </div>
</div><div class="basemethod">
  
  <a name="zim.gui.pageview.UndoStackManager.redo">
    
  </a>
  <a name="redo">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">redo</span>(self):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5308">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Redo one user action</p></div>
  </div>
</div><div class="basemethod private">
  
  <a name="zim.gui.pageview.UndoStackManager._replay">
    
  </a>
  <a name="_replay">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_replay</span>(self, actiongroup):
    <a class="functionSourceLink" href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/tree/develop/zim/gui/pageview/__init__.py#L5319">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for <a href="https://zim-wiki.org/">zim-desktop-wiki</a>, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> 21.2.2 at 2021-06-11 17:13:43.
      </address>

    </div>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>